import{v as gn,w as It,x as Xt,y as yn,z as En,E as In,G as Mn,V as ae,Q as ve,P as ke,O as Ne,I as Ht,c as Z,J as Oe,K as Je,X as lt,Y as Ee,Z as je,C as Be,_ as Qt,$ as Mt,a0 as Yt,a1 as Ye,a2 as xe,a3 as le,a4 as Tn,n as We,a5 as Vt,a6 as Fn,a7 as Ze,a8 as Dn,l as Wt,a9 as Zt,aa as qe,ab as bn,M as ft,ac as zt,ad as qt,D as Gn,ae as $e,B as we,af as $t,s as en,ag as Rn,ah as tn,ai as vn,aj as xn,ak as ze,al as ge,am as nn,an as sn,ao as on,ap as Tt,aq as Ln,ar as Hn,as as Pn,at as wn,au as Ft,av as Sn,aw as On,ax as Jn,ay as Un,T as ct,az as rn,aA as Dt,aB as an,p as kn,q as Nn,aC as Kn,aD as ut,aE as jn,aF as pt,aG as _n,aH as Xn,aI as Qn,aJ as De,aK as Yn,aL as Pe,aM as Ve,aN as Vn,aO as Wn,aP as Zn,aQ as Bt,aR as Le}from"./vendor-three.js";import{u as zn}from"./vendor-fflate.js";function Pt(p,e){if(e===gn)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),p;if(e===It||e===Xt){let n=p.getIndex();if(n===null){const r=[],i=p.getAttribute("position");if(i!==void 0){for(let a=0;a<i.count;a++)r.push(a);p.setIndex(r),n=p.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),p}const t=n.count-2,s=[];if(n)if(e===It)for(let r=1;r<=t;r++)s.push(n.getX(0)),s.push(n.getX(r)),s.push(n.getX(r+1));else for(let r=0;r<t;r++)r%2===0?(s.push(n.getX(r)),s.push(n.getX(r+1)),s.push(n.getX(r+2))):(s.push(n.getX(r+2)),s.push(n.getX(r+1)),s.push(n.getX(r)));s.length/3!==t&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=p.clone();return o.setIndex(s),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),p}const qn=parseInt(yn.replace(/\D+/g,""));var $n=Object.defineProperty,es=(p,e,n)=>e in p?$n(p,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):p[e]=n,Y=(p,e,n)=>(es(p,typeof e!="symbol"?e+"":e,n),n);const rt=new En,wt=new In,ts=Math.cos(70*(Math.PI/180)),St=(p,e)=>(p%e+e)%e;class no extends Mn{constructor(e,n){super(),Y(this,"object"),Y(this,"domElement"),Y(this,"enabled",!0),Y(this,"target",new ae),Y(this,"minDistance",0),Y(this,"maxDistance",1/0),Y(this,"minZoom",0),Y(this,"maxZoom",1/0),Y(this,"minPolarAngle",0),Y(this,"maxPolarAngle",Math.PI),Y(this,"minAzimuthAngle",-1/0),Y(this,"maxAzimuthAngle",1/0),Y(this,"enableDamping",!1),Y(this,"dampingFactor",.05),Y(this,"enableZoom",!0),Y(this,"zoomSpeed",1),Y(this,"enableRotate",!0),Y(this,"rotateSpeed",1),Y(this,"enablePan",!0),Y(this,"panSpeed",1),Y(this,"screenSpacePanning",!0),Y(this,"keyPanSpeed",7),Y(this,"zoomToCursor",!1),Y(this,"autoRotate",!1),Y(this,"autoRotateSpeed",2),Y(this,"reverseOrbit",!1),Y(this,"reverseHorizontalOrbit",!1),Y(this,"reverseVerticalOrbit",!1),Y(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Y(this,"mouseButtons",{LEFT:Oe.ROTATE,MIDDLE:Oe.DOLLY,RIGHT:Oe.PAN}),Y(this,"touches",{ONE:Je.ROTATE,TWO:Je.DOLLY_PAN}),Y(this,"target0"),Y(this,"position0"),Y(this,"zoom0"),Y(this,"_domElementKeyEvents",null),Y(this,"getPolarAngle"),Y(this,"getAzimuthalAngle"),Y(this,"setPolarAngle"),Y(this,"setAzimuthalAngle"),Y(this,"getDistance"),Y(this,"listenToKeyEvents"),Y(this,"stopListenToKeyEvents"),Y(this,"saveState"),Y(this,"reset"),Y(this,"update"),Y(this,"connect"),Y(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=C=>{let L=St(C,2*Math.PI),V=u.phi;V<0&&(V+=2*Math.PI),L<0&&(L+=2*Math.PI);let oe=Math.abs(L-V);2*Math.PI-oe<oe&&(L<V?L+=2*Math.PI:V+=2*Math.PI),c.phi=L-V,t.update()},this.setAzimuthalAngle=C=>{let L=St(C,2*Math.PI),V=u.theta;V<0&&(V+=2*Math.PI),L<0&&(L+=2*Math.PI);let oe=Math.abs(L-V);2*Math.PI-oe<oe&&(L<V?L+=2*Math.PI:V+=2*Math.PI),c.theta=L-V,t.update()},this.getDistance=()=>t.object.position.distanceTo(t.target),this.listenToKeyEvents=C=>{C.addEventListener("keydown",Se),this._domElementKeyEvents=C},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Se),this._domElementKeyEvents=null},this.saveState=()=>{t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=()=>{t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(s),t.update(),a=i.NONE},this.update=(()=>{const C=new ae,L=new ae(0,1,0),V=new ve().setFromUnitVectors(e.up,L),oe=V.clone().invert(),fe=new ae,Me=new ve,be=2*Math.PI;return function(){const Lt=t.object.position;V.setFromUnitVectors(e.up,L),oe.copy(V).invert(),C.copy(Lt).sub(t.target),C.applyQuaternion(V),u.setFromVector3(C),t.autoRotate&&a===i.NONE&&ne(U()),t.enableDamping?(u.theta+=c.theta*t.dampingFactor,u.phi+=c.phi*t.dampingFactor):(u.theta+=c.theta,u.phi+=c.phi);let Te=t.minAzimuthAngle,Fe=t.maxAzimuthAngle;isFinite(Te)&&isFinite(Fe)&&(Te<-Math.PI?Te+=be:Te>Math.PI&&(Te-=be),Fe<-Math.PI?Fe+=be:Fe>Math.PI&&(Fe-=be),Te<=Fe?u.theta=Math.max(Te,Math.min(Fe,u.theta)):u.theta=u.theta>(Te+Fe)/2?Math.max(Te,u.theta):Math.min(Fe,u.theta)),u.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,u.phi)),u.makeSafe(),t.enableDamping===!0?t.target.addScaledVector(B,t.dampingFactor):t.target.add(B),t.zoomToCursor&&Q||t.object.isOrthographicCamera?u.radius=M(u.radius):u.radius=M(u.radius*A),C.setFromSpherical(u),C.applyQuaternion(oe),Lt.copy(t.target).add(C),t.object.lookAt(t.target),t.enableDamping===!0?(c.theta*=1-t.dampingFactor,c.phi*=1-t.dampingFactor,B.multiplyScalar(1-t.dampingFactor)):(c.set(0,0,0),B.set(0,0,0));let st=!1;if(t.zoomToCursor&&Q){let _e=null;if(t.object instanceof ke&&t.object.isPerspectiveCamera){const Xe=C.length();_e=M(Xe*A);const ot=Xe-_e;t.object.position.addScaledVector(O,ot),t.object.updateMatrixWorld()}else if(t.object.isOrthographicCamera){const Xe=new ae(J.x,J.y,0);Xe.unproject(t.object),t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/A)),t.object.updateProjectionMatrix(),st=!0;const ot=new ae(J.x,J.y,0);ot.unproject(t.object),t.object.position.sub(ot).add(Xe),t.object.updateMatrixWorld(),_e=C.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),t.zoomToCursor=!1;_e!==null&&(t.screenSpacePanning?t.target.set(0,0,-1).transformDirection(t.object.matrix).multiplyScalar(_e).add(t.object.position):(rt.origin.copy(t.object.position),rt.direction.set(0,0,-1).transformDirection(t.object.matrix),Math.abs(t.object.up.dot(rt.direction))<ts?e.lookAt(t.target):(wt.setFromNormalAndCoplanarPoint(t.object.up,t.target),rt.intersectPlane(wt,t.target))))}else t.object instanceof Ne&&t.object.isOrthographicCamera&&(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/A)),t.object.updateProjectionMatrix(),st=!0);return A=1,Q=!1,st||fe.distanceToSquared(t.object.position)>l||8*(1-Me.dot(t.object.quaternion))>l?(t.dispatchEvent(s),fe.copy(t.object.position),Me.copy(t.object.quaternion),st=!1,!0):!1}})(),this.connect=C=>{C===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),t.domElement=C,t.domElement.style.touchAction="none",t.domElement.addEventListener("contextmenu",Rt),t.domElement.addEventListener("pointerdown",he),t.domElement.addEventListener("pointercancel",et),t.domElement.addEventListener("wheel",nt)},this.dispose=()=>{var C,L,V,oe,fe,Me;(C=t.domElement)==null||C.removeEventListener("contextmenu",Rt),(L=t.domElement)==null||L.removeEventListener("pointerdown",he),(V=t.domElement)==null||V.removeEventListener("pointercancel",et),(oe=t.domElement)==null||oe.removeEventListener("wheel",nt),(fe=t.domElement)==null||fe.ownerDocument.removeEventListener("pointermove",de),(Me=t.domElement)==null||Me.ownerDocument.removeEventListener("pointerup",Ie),t._domElementKeyEvents!==null&&t._domElementKeyEvents.removeEventListener("keydown",Se)};const t=this,s={type:"change"},o={type:"start"},r={type:"end"},i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=i.NONE;const l=1e-6,u=new Ht,c=new Ht;let A=1;const B=new ae,y=new Z,D=new Z,I=new Z,F=new Z,R=new Z,T=new Z,b=new Z,H=new Z,P=new Z,O=new ae,J=new Z;let Q=!1;const S=[],z={};function U(){return 2*Math.PI/60/60*t.autoRotateSpeed}function q(){return Math.pow(.95,t.zoomSpeed)}function ne(C){t.reverseOrbit||t.reverseHorizontalOrbit?c.theta+=C:c.theta-=C}function re(C){t.reverseOrbit||t.reverseVerticalOrbit?c.phi+=C:c.phi-=C}const pe=(()=>{const C=new ae;return function(V,oe){C.setFromMatrixColumn(oe,0),C.multiplyScalar(-V),B.add(C)}})(),X=(()=>{const C=new ae;return function(V,oe){t.screenSpacePanning===!0?C.setFromMatrixColumn(oe,1):(C.setFromMatrixColumn(oe,0),C.crossVectors(t.object.up,C)),C.multiplyScalar(V),B.add(C)}})(),v=(()=>{const C=new ae;return function(V,oe){const fe=t.domElement;if(fe&&t.object instanceof ke&&t.object.isPerspectiveCamera){const Me=t.object.position;C.copy(Me).sub(t.target);let be=C.length();be*=Math.tan(t.object.fov/2*Math.PI/180),pe(2*V*be/fe.clientHeight,t.object.matrix),X(2*oe*be/fe.clientHeight,t.object.matrix)}else fe&&t.object instanceof Ne&&t.object.isOrthographicCamera?(pe(V*(t.object.right-t.object.left)/t.object.zoom/fe.clientWidth,t.object.matrix),X(oe*(t.object.top-t.object.bottom)/t.object.zoom/fe.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}})();function ce(C){t.object instanceof ke&&t.object.isPerspectiveCamera||t.object instanceof Ne&&t.object.isOrthographicCamera?A/=C:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function ie(C){t.object instanceof ke&&t.object.isPerspectiveCamera||t.object instanceof Ne&&t.object.isOrthographicCamera?A*=C:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function ye(C){if(!t.zoomToCursor||!t.domElement)return;Q=!0;const L=t.domElement.getBoundingClientRect(),V=C.clientX-L.left,oe=C.clientY-L.top,fe=L.width,Me=L.height;J.x=V/fe*2-1,J.y=-(oe/Me)*2+1,O.set(J.x,J.y,1).unproject(t.object).sub(t.object.position).normalize()}function M(C){return Math.max(t.minDistance,Math.min(t.maxDistance,C))}function E(C){y.set(C.clientX,C.clientY)}function h(C){ye(C),b.set(C.clientX,C.clientY)}function g(C){F.set(C.clientX,C.clientY)}function G(C){D.set(C.clientX,C.clientY),I.subVectors(D,y).multiplyScalar(t.rotateSpeed);const L=t.domElement;L&&(ne(2*Math.PI*I.x/L.clientHeight),re(2*Math.PI*I.y/L.clientHeight)),y.copy(D),t.update()}function m(C){H.set(C.clientX,C.clientY),P.subVectors(H,b),P.y>0?ce(q()):P.y<0&&ie(q()),b.copy(H),t.update()}function x(C){R.set(C.clientX,C.clientY),T.subVectors(R,F).multiplyScalar(t.panSpeed),v(T.x,T.y),F.copy(R),t.update()}function W(C){ye(C),C.deltaY<0?ie(q()):C.deltaY>0&&ce(q()),t.update()}function j(C){let L=!1;switch(C.code){case t.keys.UP:v(0,t.keyPanSpeed),L=!0;break;case t.keys.BOTTOM:v(0,-t.keyPanSpeed),L=!0;break;case t.keys.LEFT:v(t.keyPanSpeed,0),L=!0;break;case t.keys.RIGHT:v(-t.keyPanSpeed,0),L=!0;break}L&&(C.preventDefault(),t.update())}function _(){if(S.length==1)y.set(S[0].pageX,S[0].pageY);else{const C=.5*(S[0].pageX+S[1].pageX),L=.5*(S[0].pageY+S[1].pageY);y.set(C,L)}}function k(){if(S.length==1)F.set(S[0].pageX,S[0].pageY);else{const C=.5*(S[0].pageX+S[1].pageX),L=.5*(S[0].pageY+S[1].pageY);F.set(C,L)}}function se(){const C=S[0].pageX-S[1].pageX,L=S[0].pageY-S[1].pageY,V=Math.sqrt(C*C+L*L);b.set(0,V)}function w(){t.enableZoom&&se(),t.enablePan&&k()}function N(){t.enableZoom&&se(),t.enableRotate&&_()}function d(C){if(S.length==1)D.set(C.pageX,C.pageY);else{const V=ht(C),oe=.5*(C.pageX+V.x),fe=.5*(C.pageY+V.y);D.set(oe,fe)}I.subVectors(D,y).multiplyScalar(t.rotateSpeed);const L=t.domElement;L&&(ne(2*Math.PI*I.x/L.clientHeight),re(2*Math.PI*I.y/L.clientHeight)),y.copy(D)}function f(C){if(S.length==1)R.set(C.pageX,C.pageY);else{const L=ht(C),V=.5*(C.pageX+L.x),oe=.5*(C.pageY+L.y);R.set(V,oe)}T.subVectors(R,F).multiplyScalar(t.panSpeed),v(T.x,T.y),F.copy(R)}function K(C){const L=ht(C),V=C.pageX-L.x,oe=C.pageY-L.y,fe=Math.sqrt(V*V+oe*oe);H.set(0,fe),P.set(0,Math.pow(H.y/b.y,t.zoomSpeed)),ce(P.y),b.copy(H)}function ee(C){t.enableZoom&&K(C),t.enablePan&&f(C)}function ue(C){t.enableZoom&&K(C),t.enableRotate&&d(C)}function he(C){var L,V;t.enabled!==!1&&(S.length===0&&((L=t.domElement)==null||L.ownerDocument.addEventListener("pointermove",de),(V=t.domElement)==null||V.ownerDocument.addEventListener("pointerup",Ie)),Cn(C),C.pointerType==="touch"?dn(C):At(C))}function de(C){t.enabled!==!1&&(C.pointerType==="touch"?mn(C):tt(C))}function Ie(C){var L,V,oe;vt(C),S.length===0&&((L=t.domElement)==null||L.releasePointerCapture(C.pointerId),(V=t.domElement)==null||V.ownerDocument.removeEventListener("pointermove",de),(oe=t.domElement)==null||oe.ownerDocument.removeEventListener("pointerup",Ie)),t.dispatchEvent(r),a=i.NONE}function et(C){vt(C)}function At(C){let L;switch(C.button){case 0:L=t.mouseButtons.LEFT;break;case 1:L=t.mouseButtons.MIDDLE;break;case 2:L=t.mouseButtons.RIGHT;break;default:L=-1}switch(L){case Oe.DOLLY:if(t.enableZoom===!1)return;h(C),a=i.DOLLY;break;case Oe.ROTATE:if(C.ctrlKey||C.metaKey||C.shiftKey){if(t.enablePan===!1)return;g(C),a=i.PAN}else{if(t.enableRotate===!1)return;E(C),a=i.ROTATE}break;case Oe.PAN:if(C.ctrlKey||C.metaKey||C.shiftKey){if(t.enableRotate===!1)return;E(C),a=i.ROTATE}else{if(t.enablePan===!1)return;g(C),a=i.PAN}break;default:a=i.NONE}a!==i.NONE&&t.dispatchEvent(o)}function tt(C){if(t.enabled!==!1)switch(a){case i.ROTATE:if(t.enableRotate===!1)return;G(C);break;case i.DOLLY:if(t.enableZoom===!1)return;m(C);break;case i.PAN:if(t.enablePan===!1)return;x(C);break}}function nt(C){t.enabled===!1||t.enableZoom===!1||a!==i.NONE&&a!==i.ROTATE||(C.preventDefault(),t.dispatchEvent(o),W(C),t.dispatchEvent(r))}function Se(C){t.enabled===!1||t.enablePan===!1||j(C)}function dn(C){switch(xt(C),S.length){case 1:switch(t.touches.ONE){case Je.ROTATE:if(t.enableRotate===!1)return;_(),a=i.TOUCH_ROTATE;break;case Je.PAN:if(t.enablePan===!1)return;k(),a=i.TOUCH_PAN;break;default:a=i.NONE}break;case 2:switch(t.touches.TWO){case Je.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;w(),a=i.TOUCH_DOLLY_PAN;break;case Je.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;N(),a=i.TOUCH_DOLLY_ROTATE;break;default:a=i.NONE}break;default:a=i.NONE}a!==i.NONE&&t.dispatchEvent(o)}function mn(C){switch(xt(C),a){case i.TOUCH_ROTATE:if(t.enableRotate===!1)return;d(C),t.update();break;case i.TOUCH_PAN:if(t.enablePan===!1)return;f(C),t.update();break;case i.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;ee(C),t.update();break;case i.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;ue(C),t.update();break;default:a=i.NONE}}function Rt(C){t.enabled!==!1&&C.preventDefault()}function Cn(C){S.push(C)}function vt(C){delete z[C.pointerId];for(let L=0;L<S.length;L++)if(S[L].pointerId==C.pointerId){S.splice(L,1);return}}function xt(C){let L=z[C.pointerId];L===void 0&&(L=new Z,z[C.pointerId]=L),L.set(C.pageX,C.pageY)}function ht(C){const L=C.pointerId===S[0].pointerId?S[1]:S[0];return z[L.pointerId]}n!==void 0&&this.connect(n),this.update()}}class so extends lt{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new is(n)}),this.register(function(n){return new ps(n)}),this.register(function(n){return new Bs(n)}),this.register(function(n){return new ds(n)}),this.register(function(n){return new cs(n)}),this.register(function(n){return new ls(n)}),this.register(function(n){return new us(n)}),this.register(function(n){return new As(n)}),this.register(function(n){return new rs(n)}),this.register(function(n){return new hs(n)}),this.register(function(n){return new as(n)}),this.register(function(n){return new fs(n)}),this.register(function(n){return new ss(n)}),this.register(function(n){return new ms(n)}),this.register(function(n){return new Cs(n)})}load(e,n,t,s){const o=this;let r;this.resourcePath!==""?r=this.resourcePath:this.path!==""?r=this.path:r=Ee.extractUrlBase(e),this.manager.itemStart(e);const i=function(l){s?s(l):console.error(l),o.manager.itemError(e),o.manager.itemEnd(e)},a=new je(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{o.parse(l,r,function(u){n(u),o.manager.itemEnd(e)},i)}catch(u){i(u)}},t,i)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,t,s){let o;const r={},i={};if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Ee.decodeText(new Uint8Array(e.slice(0,4)))===cn){try{r[te.KHR_BINARY_GLTF]=new gs(e)}catch(u){s&&s(u);return}o=JSON.parse(r[te.KHR_BINARY_GLTF].content)}else o=JSON.parse(Ee.decodeText(new Uint8Array(e)));else o=e;if(o.asset===void 0||o.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const a=new Ls(o,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});a.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const u=this.pluginCallbacks[l](a);i[u.name]=u,r[u.name]=!0}if(o.extensionsUsed)for(let l=0;l<o.extensionsUsed.length;++l){const u=o.extensionsUsed[l],c=o.extensionsRequired||[];switch(u){case te.KHR_MATERIALS_UNLIT:r[u]=new os;break;case te.KHR_DRACO_MESH_COMPRESSION:r[u]=new ys(o,this.dracoLoader);break;case te.KHR_TEXTURE_TRANSFORM:r[u]=new Es;break;case te.KHR_MESH_QUANTIZATION:r[u]=new Is;break;default:c.indexOf(u)>=0&&i[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}a.setExtensions(r),a.setPlugins(i),a.parse(t,s)}parseAsync(e,n){const t=this;return new Promise(function(s,o){t.parse(e,n,s,o)})}}function ns(){let p={};return{get:function(e){return p[e]},add:function(e,n){p[e]=n},remove:function(e){delete p[e]},removeAll:function(){p={}}}}const te={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class ss{constructor(e){this.parser=e,this.name=te.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let t=0,s=n.length;t<s;t++){const o=n[t];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){const n=this.parser,t="light:"+e;let s=n.cache.get(t);if(s)return s;const o=n.json,a=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let l;const u=new Be(16777215);a.color!==void 0&&u.fromArray(a.color);const c=a.range!==void 0?a.range:0;switch(a.type){case"directional":l=new Yt(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new Mt(u),l.distance=c;break;case"spot":l=new Qt(u),l.distance=c,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,l.angle=a.spot.outerConeAngle,l.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return l.position.set(0,0,0),l.decay=2,Re(l,a),a.intensity!==void 0&&(l.intensity=a.intensity),l.name=n.createUniqueName(a.name||"light_"+e),s=Promise.resolve(l),n.cache.add(t,s),s}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,t=this.parser,o=t.json.nodes[e],i=(o.extensions&&o.extensions[this.name]||{}).light;return i===void 0?null:this._loadLight(i).then(function(a){return t._getNodeRef(n.cache,i,a)})}}class os{constructor(){this.name=te.KHR_MATERIALS_UNLIT}getMaterialType(){return Ye}extendParams(e,n,t){const s=[];e.color=new Be(1,1,1),e.opacity=1;const o=n.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const r=o.baseColorFactor;e.color.fromArray(r),e.opacity=r[3]}o.baseColorTexture!==void 0&&s.push(t.assignTexture(e,"map",o.baseColorTexture,3001))}return Promise.all(s)}}class rs{constructor(e){this.parser=e,this.name=te.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name].emissiveStrength;return o!==void 0&&(n.emissiveIntensity=o),Promise.resolve()}}class is{constructor(e){this.parser=e,this.name=te.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:xe}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],r=s.extensions[this.name];if(r.clearcoatFactor!==void 0&&(n.clearcoat=r.clearcoatFactor),r.clearcoatTexture!==void 0&&o.push(t.assignTexture(n,"clearcoatMap",r.clearcoatTexture)),r.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=r.clearcoatRoughnessFactor),r.clearcoatRoughnessTexture!==void 0&&o.push(t.assignTexture(n,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),r.clearcoatNormalTexture!==void 0&&(o.push(t.assignTexture(n,"clearcoatNormalMap",r.clearcoatNormalTexture)),r.clearcoatNormalTexture.scale!==void 0)){const i=r.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new Z(i,i)}return Promise.all(o)}}class as{constructor(e){this.parser=e,this.name=te.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:xe}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],r=s.extensions[this.name];return r.iridescenceFactor!==void 0&&(n.iridescence=r.iridescenceFactor),r.iridescenceTexture!==void 0&&o.push(t.assignTexture(n,"iridescenceMap",r.iridescenceTexture)),r.iridescenceIor!==void 0&&(n.iridescenceIOR=r.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),r.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=r.iridescenceThicknessMinimum),r.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=r.iridescenceThicknessMaximum),r.iridescenceThicknessTexture!==void 0&&o.push(t.assignTexture(n,"iridescenceThicknessMap",r.iridescenceThicknessTexture)),Promise.all(o)}}class cs{constructor(e){this.parser=e,this.name=te.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:xe}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[];n.sheenColor=new Be(0,0,0),n.sheenRoughness=0,n.sheen=1;const r=s.extensions[this.name];return r.sheenColorFactor!==void 0&&n.sheenColor.fromArray(r.sheenColorFactor),r.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=r.sheenRoughnessFactor),r.sheenColorTexture!==void 0&&o.push(t.assignTexture(n,"sheenColorMap",r.sheenColorTexture,3001)),r.sheenRoughnessTexture!==void 0&&o.push(t.assignTexture(n,"sheenRoughnessMap",r.sheenRoughnessTexture)),Promise.all(o)}}class ls{constructor(e){this.parser=e,this.name=te.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:xe}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],r=s.extensions[this.name];return r.transmissionFactor!==void 0&&(n.transmission=r.transmissionFactor),r.transmissionTexture!==void 0&&o.push(t.assignTexture(n,"transmissionMap",r.transmissionTexture)),Promise.all(o)}}class us{constructor(e){this.parser=e,this.name=te.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:xe}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],r=s.extensions[this.name];n.thickness=r.thicknessFactor!==void 0?r.thicknessFactor:0,r.thicknessTexture!==void 0&&o.push(t.assignTexture(n,"thicknessMap",r.thicknessTexture)),n.attenuationDistance=r.attenuationDistance||1/0;const i=r.attenuationColor||[1,1,1];return n.attenuationColor=new Be(i[0],i[1],i[2]),Promise.all(o)}}class As{constructor(e){this.parser=e,this.name=te.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:xe}extendMaterialParams(e,n){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name];return n.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class hs{constructor(e){this.parser=e,this.name=te.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:xe}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],r=s.extensions[this.name];n.specularIntensity=r.specularFactor!==void 0?r.specularFactor:1,r.specularTexture!==void 0&&o.push(t.assignTexture(n,"specularIntensityMap",r.specularTexture));const i=r.specularColorFactor||[1,1,1];return n.specularColor=new Be(i[0],i[1],i[2]),r.specularColorTexture!==void 0&&o.push(t.assignTexture(n,"specularColorMap",r.specularColorTexture,3001)),Promise.all(o)}}class fs{constructor(e){this.parser=e,this.name=te.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:xe}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],r=s.extensions[this.name];return r.anisotropyStrength!==void 0&&(n.anisotropy=r.anisotropyStrength),r.anisotropyRotation!==void 0&&(n.anisotropyRotation=r.anisotropyRotation),r.anisotropyTexture!==void 0&&o.push(t.assignTexture(n,"anisotropyMap",r.anisotropyTexture)),Promise.all(o)}}class ps{constructor(e){this.parser=e,this.name=te.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,t=n.json,s=t.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const o=s.extensions[this.name],r=n.options.ktx2Loader;if(!r){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,o.source,r)}}class Bs{constructor(e){this.parser=e,this.name=te.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,t=this.parser,s=t.json,o=s.textures[e];if(!o.extensions||!o.extensions[n])return null;const r=o.extensions[n],i=s.images[r.source];let a=t.textureLoader;if(i.uri){const l=t.options.manager.getHandler(i.uri);l!==null&&(a=l)}return this.detectSupport().then(function(l){if(l)return t.loadTextureImage(e,r.source,a);if(s.extensionsRequired&&s.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return t.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class ds{constructor(e){this.parser=e,this.name=te.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,t=this.parser,s=t.json,o=s.textures[e];if(!o.extensions||!o.extensions[n])return null;const r=o.extensions[n],i=s.images[r.source];let a=t.textureLoader;if(i.uri){const l=t.options.manager.getHandler(i.uri);l!==null&&(a=l)}return this.detectSupport().then(function(l){if(l)return t.loadTextureImage(e,r.source,a);if(s.extensionsRequired&&s.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return t.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class ms{constructor(e){this.name=te.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,t=n.bufferViews[e];if(t.extensions&&t.extensions[this.name]){const s=t.extensions[this.name],o=this.parser.getDependency("buffer",s.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(i){const a=s.byteOffset||0,l=s.byteLength||0,u=s.count,c=s.byteStride,A=new Uint8Array(i,a,l);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(u,c,A,s.mode,s.filter).then(function(B){return B.buffer}):r.ready.then(function(){const B=new ArrayBuffer(u*c);return r.decodeGltfBuffer(new Uint8Array(B),u,c,A,s.mode,s.filter),B})})}else return null}}class Cs{constructor(e){this.name=te.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,t=n.nodes[e];if(!t.extensions||!t.extensions[this.name]||t.mesh===void 0)return null;const s=n.meshes[t.mesh];for(const l of s.primitives)if(l.mode!==Ce.TRIANGLES&&l.mode!==Ce.TRIANGLE_STRIP&&l.mode!==Ce.TRIANGLE_FAN&&l.mode!==void 0)return null;const r=t.extensions[this.name].attributes,i=[],a={};for(const l in r)i.push(this.parser.getDependency("accessor",r[l]).then(u=>(a[l]=u,a[l])));return i.length<1?null:(i.push(this.parser.createNodeMesh(e)),Promise.all(i).then(l=>{const u=l.pop(),c=u.isGroup?u.children:[u],A=l[0].count,B=[];for(const y of c){const D=new le,I=new ae,F=new ve,R=new ae(1,1,1),T=new Tn(y.geometry,y.material,A);for(let b=0;b<A;b++)a.TRANSLATION&&I.fromBufferAttribute(a.TRANSLATION,b),a.ROTATION&&F.fromBufferAttribute(a.ROTATION,b),a.SCALE&&R.fromBufferAttribute(a.SCALE,b),T.setMatrixAt(b,D.compose(I,F,R));for(const b in a)b!=="TRANSLATION"&&b!=="ROTATION"&&b!=="SCALE"&&y.geometry.setAttribute(b,a[b]);We.prototype.copy.call(T,y),this.parser.assignFinalMaterial(T),B.push(T)}return u.isGroup?(u.clear(),u.add(...B),u):B[0]}))}}const cn="glTF",Qe=12,Ot={JSON:1313821514,BIN:5130562};class gs{constructor(e){this.name=te.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,Qe);if(this.header={magic:Ee.decodeText(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==cn)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const t=this.header.length-Qe,s=new DataView(e,Qe);let o=0;for(;o<t;){const r=s.getUint32(o,!0);o+=4;const i=s.getUint32(o,!0);if(o+=4,i===Ot.JSON){const a=new Uint8Array(e,Qe+o,r);this.content=Ee.decodeText(a)}else if(i===Ot.BIN){const a=Qe+o;this.body=e.slice(a,a+r)}o+=r}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class ys{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=te.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const t=this.json,s=this.dracoLoader,o=e.extensions[this.name].bufferView,r=e.extensions[this.name].attributes,i={},a={},l={};for(const u in r){const c=bt[u]||u.toLowerCase();i[c]=r[u]}for(const u in e.attributes){const c=bt[u]||u.toLowerCase();if(r[u]!==void 0){const A=t.accessors[e.attributes[u]],B=Ke[A.componentType];l[c]=B.name,a[c]=A.normalized===!0}}return n.getDependency("bufferView",o).then(function(u){return new Promise(function(c){s.decodeDracoFile(u,function(A){for(const B in A.attributes){const y=A.attributes[B],D=a[B];D!==void 0&&(y.normalized=D)}c(A)},i,l)})})}}class Es{constructor(){this.name=te.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class Is{constructor(){this.name=te.KHR_MESH_QUANTIZATION}}class ln extends Kn{constructor(e,n,t,s){super(e,n,t,s)}copySampleValue_(e){const n=this.resultBuffer,t=this.sampleValues,s=this.valueSize,o=e*s*3+s;for(let r=0;r!==s;r++)n[r]=t[o+r];return n}interpolate_(e,n,t,s){const o=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=i*2,l=i*3,u=s-n,c=(t-n)/u,A=c*c,B=A*c,y=e*l,D=y-l,I=-2*B+3*A,F=B-A,R=1-I,T=F-A+c;for(let b=0;b!==i;b++){const H=r[D+b+i],P=r[D+b+a]*u,O=r[y+b+i],J=r[y+b]*u;o[b]=R*H+T*P+I*O+F*J}return o}}const Ms=new ve;class Ts extends ln{interpolate_(e,n,t,s){const o=super.interpolate_(e,n,t,s);return Ms.fromArray(o).normalize().toArray(o),o}}const Ce={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ke={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Jt={9728:Ln,9729:Wt,9984:Hn,9985:Pn,9986:wn,9987:Zt},Ut={33071:Ft,33648:Sn,10497:qe},dt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},bt={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...qn>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ge={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Fs={CUBICSPLINE:void 0,LINEAR:sn,STEP:On},mt={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Ds(p){return p.DefaultMaterial===void 0&&(p.DefaultMaterial=new qt({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Jn})),p.DefaultMaterial}function He(p,e,n){for(const t in n.extensions)p[t]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[t]=n.extensions[t])}function Re(p,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(p.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function bs(p,e,n){let t=!1,s=!1,o=!1;for(let l=0,u=e.length;l<u;l++){const c=e[l];if(c.POSITION!==void 0&&(t=!0),c.NORMAL!==void 0&&(s=!0),c.COLOR_0!==void 0&&(o=!0),t&&s&&o)break}if(!t&&!s&&!o)return Promise.resolve(p);const r=[],i=[],a=[];for(let l=0,u=e.length;l<u;l++){const c=e[l];if(t){const A=c.POSITION!==void 0?n.getDependency("accessor",c.POSITION):p.attributes.position;r.push(A)}if(s){const A=c.NORMAL!==void 0?n.getDependency("accessor",c.NORMAL):p.attributes.normal;i.push(A)}if(o){const A=c.COLOR_0!==void 0?n.getDependency("accessor",c.COLOR_0):p.attributes.color;a.push(A)}}return Promise.all([Promise.all(r),Promise.all(i),Promise.all(a)]).then(function(l){const u=l[0],c=l[1],A=l[2];return t&&(p.morphAttributes.position=u),s&&(p.morphAttributes.normal=c),o&&(p.morphAttributes.color=A),p.morphTargetsRelative=!0,p})}function Gs(p,e){if(p.updateMorphTargets(),e.weights!==void 0)for(let n=0,t=e.weights.length;n<t;n++)p.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(p.morphTargetInfluences.length===n.length){p.morphTargetDictionary={};for(let t=0,s=n.length;t<s;t++)p.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Rs(p){let e;const n=p.extensions&&p.extensions[te.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+Ct(n.attributes):e=p.indices+":"+Ct(p.attributes)+":"+p.mode,p.targets!==void 0)for(let t=0,s=p.targets.length;t<s;t++)e+=":"+Ct(p.targets[t]);return e}function Ct(p){let e="";const n=Object.keys(p).sort();for(let t=0,s=n.length;t<s;t++)e+=n[t]+":"+p[n[t]]+";";return e}function Gt(p){switch(p){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function vs(p){return p.search(/\.jpe?g($|\?)/i)>0||p.search(/^data\:image\/jpeg/)===0?"image/jpeg":p.search(/\.webp($|\?)/i)>0||p.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const xs=new le;class Ls{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new ns,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let t=!1,s=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,o=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||t||s&&o<98?this.textureLoader=new Vt(this.options.manager):this.textureLoader=new Fn(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new je(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const t=this,s=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(r){return r._markDefs&&r._markDefs()}),Promise.all(this._invokeAll(function(r){return r.beforeRoot&&r.beforeRoot()})).then(function(){return Promise.all([t.getDependencies("scene"),t.getDependencies("animation"),t.getDependencies("camera")])}).then(function(r){const i={scene:r[0][s.scene||0],scenes:r[0],animations:r[1],cameras:r[2],asset:s.asset,parser:t,userData:{}};He(o,i,s),Re(i,s),Promise.all(t._invokeAll(function(a){return a.afterRoot&&a.afterRoot(i)})).then(function(){e(i)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],t=this.json.meshes||[];for(let s=0,o=n.length;s<o;s++){const r=n[s].joints;for(let i=0,a=r.length;i<a;i++)e[r[i]].isBone=!0}for(let s=0,o=e.length;s<o;s++){const r=e[s];r.mesh!==void 0&&(this._addNodeRef(this.meshCache,r.mesh),r.skin!==void 0&&(t[r.mesh].isSkinnedMesh=!0)),r.camera!==void 0&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,t){if(e.refs[n]<=1)return t;const s=t.clone(),o=(r,i)=>{const a=this.associations.get(r);a!=null&&this.associations.set(i,a);for(const[l,u]of r.children.entries())o(u,i.children[l])};return o(t,s),s.name+="_instance_"+e.uses[n]++,s}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let t=0;t<n.length;t++){const s=e(n[t]);if(s)return s}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const t=[];for(let s=0;s<n.length;s++){const o=e(n[s]);o&&t.push(o)}return t}getDependency(e,n){const t=e+":"+n;let s=this.cache.get(t);if(!s){switch(e){case"scene":s=this.loadScene(n);break;case"node":s=this._invokeOne(function(o){return o.loadNode&&o.loadNode(n)});break;case"mesh":s=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(n)});break;case"accessor":s=this.loadAccessor(n);break;case"bufferView":s=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(n)});break;case"buffer":s=this.loadBuffer(n);break;case"material":s=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(n)});break;case"texture":s=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(n)});break;case"skin":s=this.loadSkin(n);break;case"animation":s=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(n)});break;case"camera":s=this.loadCamera(n);break;default:if(s=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,n)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(t,s)}return s}getDependencies(e){let n=this.cache.get(e);if(!n){const t=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(s.map(function(o,r){return t.getDependency(e,r)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],t=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[te.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(o,r){t.load(Ee.resolveURL(n.uri,s.path),o,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(t){const s=n.byteLength||0,o=n.byteOffset||0;return t.slice(o,o+s)})}loadAccessor(e){const n=this,t=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const r=dt[s.type],i=Ke[s.componentType],a=s.normalized===!0,l=new i(s.count*r);return Promise.resolve(new Ze(l,r,a))}const o=[];return s.bufferView!==void 0?o.push(this.getDependency("bufferView",s.bufferView)):o.push(null),s.sparse!==void 0&&(o.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(o).then(function(r){const i=r[0],a=dt[s.type],l=Ke[s.componentType],u=l.BYTES_PER_ELEMENT,c=u*a,A=s.byteOffset||0,B=s.bufferView!==void 0?t.bufferViews[s.bufferView].byteStride:void 0,y=s.normalized===!0;let D,I;if(B&&B!==c){const F=Math.floor(A/B),R="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+F+":"+s.count;let T=n.cache.get(R);T||(D=new l(i,F*B,s.count*B/u),T=new Dn(D,B/u),n.cache.add(R,T)),I=new Un(T,a,A%B/u,y)}else i===null?D=new l(s.count*a):D=new l(i,A,s.count*a),I=new Ze(D,a,y);if(s.sparse!==void 0){const F=dt.SCALAR,R=Ke[s.sparse.indices.componentType],T=s.sparse.indices.byteOffset||0,b=s.sparse.values.byteOffset||0,H=new R(r[1],T,s.sparse.count*F),P=new l(r[2],b,s.sparse.count*a);i!==null&&(I=new Ze(I.array.slice(),I.itemSize,I.normalized));for(let O=0,J=H.length;O<J;O++){const Q=H[O];if(I.setX(Q,P[O*a]),a>=2&&I.setY(Q,P[O*a+1]),a>=3&&I.setZ(Q,P[O*a+2]),a>=4&&I.setW(Q,P[O*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return I})}loadTexture(e){const n=this.json,t=this.options,o=n.textures[e].source,r=n.images[o];let i=this.textureLoader;if(r.uri){const a=t.manager.getHandler(r.uri);a!==null&&(i=a)}return this.loadTextureImage(e,o,i)}loadTextureImage(e,n,t){const s=this,o=this.json,r=o.textures[e],i=o.images[n],a=(i.uri||i.bufferView)+":"+r.sampler;if(this.textureCache[a])return this.textureCache[a];const l=this.loadImageSource(n,t).then(function(u){u.flipY=!1,u.name=r.name||i.name||"",u.name===""&&typeof i.uri=="string"&&i.uri.startsWith("data:image/")===!1&&(u.name=i.uri);const A=(o.samplers||{})[r.sampler]||{};return u.magFilter=Jt[A.magFilter]||Wt,u.minFilter=Jt[A.minFilter]||Zt,u.wrapS=Ut[A.wrapS]||qe,u.wrapT=Ut[A.wrapT]||qe,s.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[a]=l,l}loadImageSource(e,n){const t=this,s=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(c=>c.clone());const r=s.images[e],i=self.URL||self.webkitURL;let a=r.uri||"",l=!1;if(r.bufferView!==void 0)a=t.getDependency("bufferView",r.bufferView).then(function(c){l=!0;const A=new Blob([c],{type:r.mimeType});return a=i.createObjectURL(A),a});else if(r.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(a).then(function(c){return new Promise(function(A,B){let y=A;n.isImageBitmapLoader===!0&&(y=function(D){const I=new ct(D);I.needsUpdate=!0,A(I)}),n.load(Ee.resolveURL(c,o.path),y,void 0,B)})}).then(function(c){return l===!0&&i.revokeObjectURL(a),c.userData.mimeType=r.mimeType||vs(r.uri),c}).catch(function(c){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),c});return this.sourceCache[e]=u,u}assignTexture(e,n,t,s){const o=this;return this.getDependency("texture",t.index).then(function(r){if(!r)return null;if(t.texCoord!==void 0&&t.texCoord>0&&(r=r.clone(),r.channel=t.texCoord),o.extensions[te.KHR_TEXTURE_TRANSFORM]){const i=t.extensions!==void 0?t.extensions[te.KHR_TEXTURE_TRANSFORM]:void 0;if(i){const a=o.associations.get(r);r=o.extensions[te.KHR_TEXTURE_TRANSFORM].extendTexture(r,i),o.associations.set(r,a)}}return s!==void 0&&("colorSpace"in r?r.colorSpace=s===3001?"srgb":"srgb-linear":r.encoding=s),e[n]=r,r})}assignFinalMaterial(e){const n=e.geometry;let t=e.material;const s=n.attributes.tangent===void 0,o=n.attributes.color!==void 0,r=n.attributes.normal===void 0;if(e.isPoints){const i="PointsMaterial:"+t.uuid;let a=this.cache.get(i);a||(a=new bn,ft.prototype.copy.call(a,t),a.color.copy(t.color),a.map=t.map,a.sizeAttenuation=!1,this.cache.add(i,a)),t=a}else if(e.isLine){const i="LineBasicMaterial:"+t.uuid;let a=this.cache.get(i);a||(a=new zt,ft.prototype.copy.call(a,t),a.color.copy(t.color),a.map=t.map,this.cache.add(i,a)),t=a}if(s||o||r){let i="ClonedMaterial:"+t.uuid+":";s&&(i+="derivative-tangents:"),o&&(i+="vertex-colors:"),r&&(i+="flat-shading:");let a=this.cache.get(i);a||(a=t.clone(),o&&(a.vertexColors=!0),r&&(a.flatShading=!0),s&&(a.normalScale&&(a.normalScale.y*=-1),a.clearcoatNormalScale&&(a.clearcoatNormalScale.y*=-1)),this.cache.add(i,a),this.associations.set(a,this.associations.get(t))),t=a}e.material=t}getMaterialType(){return qt}loadMaterial(e){const n=this,t=this.json,s=this.extensions,o=t.materials[e];let r;const i={},a=o.extensions||{},l=[];if(a[te.KHR_MATERIALS_UNLIT]){const c=s[te.KHR_MATERIALS_UNLIT];r=c.getMaterialType(),l.push(c.extendParams(i,o,n))}else{const c=o.pbrMetallicRoughness||{};if(i.color=new Be(1,1,1),i.opacity=1,Array.isArray(c.baseColorFactor)){const A=c.baseColorFactor;i.color.fromArray(A),i.opacity=A[3]}c.baseColorTexture!==void 0&&l.push(n.assignTexture(i,"map",c.baseColorTexture,3001)),i.metalness=c.metallicFactor!==void 0?c.metallicFactor:1,i.roughness=c.roughnessFactor!==void 0?c.roughnessFactor:1,c.metallicRoughnessTexture!==void 0&&(l.push(n.assignTexture(i,"metalnessMap",c.metallicRoughnessTexture)),l.push(n.assignTexture(i,"roughnessMap",c.metallicRoughnessTexture))),r=this._invokeOne(function(A){return A.getMaterialType&&A.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(A){return A.extendMaterialParams&&A.extendMaterialParams(e,i)})))}o.doubleSided===!0&&(i.side=Gn);const u=o.alphaMode||mt.OPAQUE;if(u===mt.BLEND?(i.transparent=!0,i.depthWrite=!1):(i.transparent=!1,u===mt.MASK&&(i.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&r!==Ye&&(l.push(n.assignTexture(i,"normalMap",o.normalTexture)),i.normalScale=new Z(1,1),o.normalTexture.scale!==void 0)){const c=o.normalTexture.scale;i.normalScale.set(c,c)}return o.occlusionTexture!==void 0&&r!==Ye&&(l.push(n.assignTexture(i,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(i.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&r!==Ye&&(i.emissive=new Be().fromArray(o.emissiveFactor)),o.emissiveTexture!==void 0&&r!==Ye&&l.push(n.assignTexture(i,"emissiveMap",o.emissiveTexture,3001)),Promise.all(l).then(function(){const c=new r(i);return o.name&&(c.name=o.name),Re(c,o),n.associations.set(c,{materials:e}),o.extensions&&He(s,c,o),c})}createUniqueName(e){const n=$e.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,t=this.extensions,s=this.primitiveCache;function o(i){return t[te.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(i,n).then(function(a){return kt(a,i,n)})}const r=[];for(let i=0,a=e.length;i<a;i++){const l=e[i],u=Rs(l),c=s[u];if(c)r.push(c.promise);else{let A;l.extensions&&l.extensions[te.KHR_DRACO_MESH_COMPRESSION]?A=o(l):A=kt(new we,l,n),s[u]={primitive:l,promise:A},r.push(A)}}return Promise.all(r)}loadMesh(e){const n=this,t=this.json,s=this.extensions,o=t.meshes[e],r=o.primitives,i=[];for(let a=0,l=r.length;a<l;a++){const u=r[a].material===void 0?Ds(this.cache):this.getDependency("material",r[a].material);i.push(u)}return i.push(n.loadGeometries(r)),Promise.all(i).then(function(a){const l=a.slice(0,a.length-1),u=a[a.length-1],c=[];for(let B=0,y=u.length;B<y;B++){const D=u[B],I=r[B];let F;const R=l[B];if(I.mode===Ce.TRIANGLES||I.mode===Ce.TRIANGLE_STRIP||I.mode===Ce.TRIANGLE_FAN||I.mode===void 0)F=o.isSkinnedMesh===!0?new $t(D,R):new en(D,R),F.isSkinnedMesh===!0&&F.normalizeSkinWeights(),I.mode===Ce.TRIANGLE_STRIP?F.geometry=Pt(F.geometry,Xt):I.mode===Ce.TRIANGLE_FAN&&(F.geometry=Pt(F.geometry,It));else if(I.mode===Ce.LINES)F=new Rn(D,R);else if(I.mode===Ce.LINE_STRIP)F=new tn(D,R);else if(I.mode===Ce.LINE_LOOP)F=new vn(D,R);else if(I.mode===Ce.POINTS)F=new xn(D,R);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+I.mode);Object.keys(F.geometry.morphAttributes).length>0&&Gs(F,o),F.name=n.createUniqueName(o.name||"mesh_"+e),Re(F,o),I.extensions&&He(s,F,I),n.assignFinalMaterial(F),c.push(F)}for(let B=0,y=c.length;B<y;B++)n.associations.set(c[B],{meshes:e,primitives:B});if(c.length===1)return o.extensions&&He(s,c[0],o),c[0];const A=new ze;o.extensions&&He(s,A,o),n.associations.set(A,{meshes:e});for(let B=0,y=c.length;B<y;B++)A.add(c[B]);return A})}loadCamera(e){let n;const t=this.json.cameras[e],s=t[t.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return t.type==="perspective"?n=new ke(ge.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):t.type==="orthographic"&&(n=new Ne(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),t.name&&(n.name=this.createUniqueName(t.name)),Re(n,t),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],t=[];for(let s=0,o=n.joints.length;s<o;s++)t.push(this._loadNodeShallow(n.joints[s]));return n.inverseBindMatrices!==void 0?t.push(this.getDependency("accessor",n.inverseBindMatrices)):t.push(null),Promise.all(t).then(function(s){const o=s.pop(),r=s,i=[],a=[];for(let l=0,u=r.length;l<u;l++){const c=r[l];if(c){i.push(c);const A=new le;o!==null&&A.fromArray(o.array,l*16),a.push(A)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[l])}return new nn(i,a)})}loadAnimation(e){const t=this.json.animations[e],s=t.name?t.name:"animation_"+e,o=[],r=[],i=[],a=[],l=[];for(let u=0,c=t.channels.length;u<c;u++){const A=t.channels[u],B=t.samplers[A.sampler],y=A.target,D=y.node,I=t.parameters!==void 0?t.parameters[B.input]:B.input,F=t.parameters!==void 0?t.parameters[B.output]:B.output;y.node!==void 0&&(o.push(this.getDependency("node",D)),r.push(this.getDependency("accessor",I)),i.push(this.getDependency("accessor",F)),a.push(B),l.push(y))}return Promise.all([Promise.all(o),Promise.all(r),Promise.all(i),Promise.all(a),Promise.all(l)]).then(function(u){const c=u[0],A=u[1],B=u[2],y=u[3],D=u[4],I=[];for(let F=0,R=c.length;F<R;F++){const T=c[F],b=A[F],H=B[F],P=y[F],O=D[F];if(T===void 0)continue;T.updateMatrix();let J;switch(Ge[O.path]){case Ge.weights:J=an;break;case Ge.rotation:J=Dt;break;case Ge.position:case Ge.scale:default:J=rn;break}const Q=T.name?T.name:T.uuid,S=P.interpolation!==void 0?Fs[P.interpolation]:sn,z=[];Ge[O.path]===Ge.weights?T.traverse(function(q){q.morphTargetInfluences&&z.push(q.name?q.name:q.uuid)}):z.push(Q);let U=H.array;if(H.normalized){const q=Gt(U.constructor),ne=new Float32Array(U.length);for(let re=0,pe=U.length;re<pe;re++)ne[re]=U[re]*q;U=ne}for(let q=0,ne=z.length;q<ne;q++){const re=new J(z[q]+"."+Ge[O.path],b.array,U,S);P.interpolation==="CUBICSPLINE"&&(re.createInterpolant=function(X){const v=this instanceof Dt?Ts:ln;return new v(this.times,this.values,this.getValueSize()/3,X)},re.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),I.push(re)}}return new on(s,void 0,I)})}createNodeMesh(e){const n=this.json,t=this,s=n.nodes[e];return s.mesh===void 0?null:t.getDependency("mesh",s.mesh).then(function(o){const r=t._getNodeRef(t.meshCache,s.mesh,o);return s.weights!==void 0&&r.traverse(function(i){if(i.isMesh)for(let a=0,l=s.weights.length;a<l;a++)i.morphTargetInfluences[a]=s.weights[a]}),r})}loadNode(e){const n=this.json,t=this,s=n.nodes[e],o=t._loadNodeShallow(e),r=[],i=s.children||[];for(let l=0,u=i.length;l<u;l++)r.push(t.getDependency("node",i[l]));const a=s.skin===void 0?Promise.resolve(null):t.getDependency("skin",s.skin);return Promise.all([o,Promise.all(r),a]).then(function(l){const u=l[0],c=l[1],A=l[2];A!==null&&u.traverse(function(B){B.isSkinnedMesh&&B.bind(A,xs)});for(let B=0,y=c.length;B<y;B++)u.add(c[B]);return u})}_loadNodeShallow(e){const n=this.json,t=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const o=n.nodes[e],r=o.name?s.createUniqueName(o.name):"",i=[],a=s._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return a&&i.push(a),o.camera!==void 0&&i.push(s.getDependency("camera",o.camera).then(function(l){return s._getNodeRef(s.cameraCache,o.camera,l)})),s._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){i.push(l)}),this.nodeCache[e]=Promise.all(i).then(function(l){let u;if(o.isBone===!0?u=new Tt:l.length>1?u=new ze:l.length===1?u=l[0]:u=new We,u!==l[0])for(let c=0,A=l.length;c<A;c++)u.add(l[c]);if(o.name&&(u.userData.name=o.name,u.name=r),Re(u,o),o.extensions&&He(t,u,o),o.matrix!==void 0){const c=new le;c.fromArray(o.matrix),u.applyMatrix4(c)}else o.translation!==void 0&&u.position.fromArray(o.translation),o.rotation!==void 0&&u.quaternion.fromArray(o.rotation),o.scale!==void 0&&u.scale.fromArray(o.scale);return s.associations.has(u)||s.associations.set(u,{}),s.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const n=this.extensions,t=this.json.scenes[e],s=this,o=new ze;t.name&&(o.name=s.createUniqueName(t.name)),Re(o,t),t.extensions&&He(n,o,t);const r=t.nodes||[],i=[];for(let a=0,l=r.length;a<l;a++)i.push(s.getDependency("node",r[a]));return Promise.all(i).then(function(a){for(let u=0,c=a.length;u<c;u++)o.add(a[u]);const l=u=>{const c=new Map;for(const[A,B]of s.associations)(A instanceof ft||A instanceof ct)&&c.set(A,B);return u.traverse(A=>{const B=s.associations.get(A);B!=null&&c.set(A,B)}),c};return s.associations=l(o),o})}}function Hs(p,e,n){const t=e.attributes,s=new kn;if(t.POSITION!==void 0){const i=n.json.accessors[t.POSITION],a=i.min,l=i.max;if(a!==void 0&&l!==void 0){if(s.set(new ae(a[0],a[1],a[2]),new ae(l[0],l[1],l[2])),i.normalized){const u=Gt(Ke[i.componentType]);s.min.multiplyScalar(u),s.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=e.targets;if(o!==void 0){const i=new ae,a=new ae;for(let l=0,u=o.length;l<u;l++){const c=o[l];if(c.POSITION!==void 0){const A=n.json.accessors[c.POSITION],B=A.min,y=A.max;if(B!==void 0&&y!==void 0){if(a.setX(Math.max(Math.abs(B[0]),Math.abs(y[0]))),a.setY(Math.max(Math.abs(B[1]),Math.abs(y[1]))),a.setZ(Math.max(Math.abs(B[2]),Math.abs(y[2]))),A.normalized){const D=Gt(Ke[A.componentType]);a.multiplyScalar(D)}i.max(a)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(i)}p.boundingBox=s;const r=new Nn;s.getCenter(r.center),r.radius=s.min.distanceTo(s.max)/2,p.boundingSphere=r}function kt(p,e,n){const t=e.attributes,s=[];function o(r,i){return n.getDependency("accessor",r).then(function(a){p.setAttribute(i,a)})}for(const r in t){const i=bt[r]||r.toLowerCase();i in p.attributes||s.push(o(t[r],i))}if(e.indices!==void 0&&!p.index){const r=n.getDependency("accessor",e.indices).then(function(i){p.setIndex(i)});s.push(r)}return Re(p,e),Hs(p,e,n),Promise.all(s).then(function(){return e.targets!==void 0?bs(p,e.targets,n):p})}const oo={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},ro={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};function un(p,e,n){const t=n.length-p-1;if(e>=n[t])return t-1;if(e<=n[p])return p;let s=p,o=t,r=Math.floor((s+o)/2);for(;e<n[r]||e>=n[r+1];)e<n[r]?o=r:s=r,r=Math.floor((s+o)/2);return r}function Ps(p,e,n,t){const s=[],o=[],r=[];s[0]=1;for(let i=1;i<=n;++i){o[i]=e-t[p+1-i],r[i]=t[p+i]-e;let a=0;for(let l=0;l<i;++l){const u=r[l+1],c=o[i-l],A=s[l]/(u+c);s[l]=a+u*A,a=c*A}s[i]=a}return s}function ws(p,e,n,t){const s=un(p,t,e),o=Ps(s,t,p,e),r=new ut(0,0,0,0);for(let i=0;i<=p;++i){const a=n[s-p+i],l=o[i],u=a.w*l;r.x+=a.x*u,r.y+=a.y*u,r.z+=a.z*u,r.w+=a.w*l}return r}function Ss(p,e,n,t,s){const o=[];for(let c=0;c<=n;++c)o[c]=0;const r=[];for(let c=0;c<=t;++c)r[c]=o.slice(0);const i=[];for(let c=0;c<=n;++c)i[c]=o.slice(0);i[0][0]=1;const a=o.slice(0),l=o.slice(0);for(let c=1;c<=n;++c){a[c]=e-s[p+1-c],l[c]=s[p+c]-e;let A=0;for(let B=0;B<c;++B){const y=l[B+1],D=a[c-B];i[c][B]=y+D;const I=i[B][c-1]/i[c][B];i[B][c]=A+y*I,A=D*I}i[c][c]=A}for(let c=0;c<=n;++c)r[0][c]=i[c][n];for(let c=0;c<=n;++c){let A=0,B=1;const y=[];for(let D=0;D<=n;++D)y[D]=o.slice(0);y[0][0]=1;for(let D=1;D<=t;++D){let I=0;const F=c-D,R=n-D;c>=D&&(y[B][0]=y[A][0]/i[R+1][F],I=y[B][0]*i[F][R]);const T=F>=-1?1:-F,b=c-1<=R?D-1:n-c;for(let P=T;P<=b;++P)y[B][P]=(y[A][P]-y[A][P-1])/i[R+1][F+P],I+=y[B][P]*i[F+P][R];c<=R&&(y[B][D]=-y[A][D-1]/i[R+1][c],I+=y[B][D]*i[c][R]),r[D][c]=I;const H=A;A=B,B=H}}let u=n;for(let c=1;c<=t;++c){for(let A=0;A<=n;++A)r[c][A]*=u;u*=n-c}return r}function Os(p,e,n,t,s){const o=s<p?s:p,r=[],i=un(p,t,e),a=Ss(i,t,p,o,e),l=[];for(let u=0;u<n.length;++u){const c=n[u].clone(),A=c.w;c.x*=A,c.y*=A,c.z*=A,l[u]=c}for(let u=0;u<=o;++u){const c=l[i-p].clone().multiplyScalar(a[u][0]);for(let A=1;A<=p;++A)c.add(l[i-p+A].clone().multiplyScalar(a[u][A]));r[u]=c}for(let u=o+1;u<=s+1;++u)r[u]=new ut(0,0,0);return r}function Js(p,e){let n=1;for(let s=2;s<=p;++s)n*=s;let t=1;for(let s=2;s<=e;++s)t*=s;for(let s=2;s<=p-e;++s)t*=s;return n/t}function Us(p){const e=p.length,n=[],t=[];for(let o=0;o<e;++o){const r=p[o];n[o]=new ae(r.x,r.y,r.z),t[o]=r.w}const s=[];for(let o=0;o<e;++o){const r=n[o].clone();for(let i=1;i<=o;++i)r.sub(s[o-i].clone().multiplyScalar(Js(o,i)*t[i]));s[o]=r.divideScalar(t[0])}return s}function ks(p,e,n,t,s){const o=Os(p,e,n,t,s);return Us(o)}class Nt extends jn{constructor(e,n,t,s,o){super(),this.degree=e,this.knots=n,this.controlPoints=[],this.startKnot=s||0,this.endKnot=o||this.knots.length-1;for(let r=0;r<t.length;++r){const i=t[r];this.controlPoints[r]=new ut(i.x,i.y,i.z,i.w)}}getPoint(e,n){const t=n||new ae,s=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=ws(this.degree,this.knots,this.controlPoints,s);return o.w!=1&&o.divideScalar(o.w),t.set(o.x,o.y,o.z)}getTangent(e,n){const t=n||new ae,s=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=ks(this.degree,this.knots,this.controlPoints,s,1);return t.copy(o[1]).normalize(),t}}let $,Ae,me;class io extends lt{constructor(e){super(e)}load(e,n,t,s){const o=this,r=o.path===""?Ee.extractUrlBase(e):o.path,i=new je(this.manager);i.setPath(o.path),i.setResponseType("arraybuffer"),i.setRequestHeader(o.requestHeader),i.setWithCredentials(o.withCredentials),i.load(e,function(a){try{n(o.parse(a,r))}catch(l){s?s(l):console.error(l),o.manager.itemError(e)}},t,s)}parse(e,n){if(Qs(e))$=new Xs().parse(e);else{const s=pn(e);if(!Ys(s))throw new Error("THREE.FBXLoader: Unknown format.");if(jt(s)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+jt(s));$=new _s().parse(s)}const t=new Vt(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new Ns(t,this.manager).parse($)}}class Ns{constructor(e,n){this.textureLoader=e,this.manager=n}parse(){Ae=this.parseConnections();const e=this.parseImages(),n=this.parseTextures(e),t=this.parseMaterials(n),s=this.parseDeformers(),o=new Ks().parse(s);return this.parseScene(s,o,t),me}parseConnections(){const e=new Map;return"Connections"in $&&$.Connections.connections.forEach(function(t){const s=t[0],o=t[1],r=t[2];e.has(s)||e.set(s,{parents:[],children:[]});const i={ID:o,relationship:r};e.get(s).parents.push(i),e.has(o)||e.set(o,{parents:[],children:[]});const a={ID:s,relationship:r};e.get(o).children.push(a)}),e}parseImages(){const e={},n={};if("Video"in $.Objects){const t=$.Objects.Video;for(const s in t){const o=t[s],r=parseInt(s);if(e[r]=o.RelativeFilename||o.Filename,"Content"in o){const i=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,a=typeof o.Content=="string"&&o.Content!=="";if(i||a){const l=this.parseImage(t[s]);n[o.RelativeFilename||o.Filename]=l}}}}for(const t in e){const s=e[t];n[s]!==void 0?e[t]=n[s]:e[t]=e[t].split("\\").pop()}return e}parseImage(e){const n=e.Content,t=e.RelativeFilename||e.Filename,s=t.slice(t.lastIndexOf(".")+1).toLowerCase();let o;switch(s){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",t),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+s+'" is not supported.');return}if(typeof n=="string")return"data:"+o+";base64,"+n;{const r=new Uint8Array(n);return window.URL.createObjectURL(new Blob([r],{type:o}))}}parseTextures(e){const n=new Map;if("Texture"in $.Objects){const t=$.Objects.Texture;for(const s in t){const o=this.parseTexture(t[s],e);n.set(parseInt(s),o)}}return n}parseTexture(e,n){const t=this.loadTexture(e,n);t.ID=e.id,t.name=e.attrName;const s=e.WrapModeU,o=e.WrapModeV,r=s!==void 0?s.value:0,i=o!==void 0?o.value:0;if(t.wrapS=r===0?qe:Ft,t.wrapT=i===0?qe:Ft,"Scaling"in e){const a=e.Scaling.value;t.repeat.x=a[0],t.repeat.y=a[1]}return t}loadTexture(e,n){let t;const s=this.textureLoader.path,o=Ae.get(e.id).children;o!==void 0&&o.length>0&&n[o[0].ID]!==void 0&&(t=n[o[0].ID],(t.indexOf("blob:")===0||t.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let r;const i=e.FileName.slice(-3).toLowerCase();if(i==="tga"){const a=this.manager.getHandler(".tga");a===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),r=new ct):(a.setPath(this.textureLoader.path),r=a.load(t))}else i==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),r=new ct):r=this.textureLoader.load(t);return this.textureLoader.setPath(s),r}parseMaterials(e){const n=new Map;if("Material"in $.Objects){const t=$.Objects.Material;for(const s in t){const o=this.parseMaterial(t[s],e);o!==null&&n.set(parseInt(s),o)}}return n}parseMaterial(e,n){const t=e.id,s=e.attrName;let o=e.ShadingModel;if(typeof o=="object"&&(o=o.value),!Ae.has(t))return null;const r=this.parseParameters(e,n,t);let i;switch(o.toLowerCase()){case"phong":i=new pt;break;case"lambert":i=new _n;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),i=new pt;break}return i.setValues(r),i.name=s,i}parseParameters(e,n,t){const s={};e.BumpFactor&&(s.bumpScale=e.BumpFactor.value),e.Diffuse?s.color=new Be().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(s.color=new Be().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(s.displacementScale=e.DisplacementFactor.value),e.Emissive?s.emissive=new Be().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(s.emissive=new Be().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(s.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(s.opacity=parseFloat(e.Opacity.value)),s.opacity<1&&(s.transparent=!0),e.ReflectionFactor&&(s.reflectivity=e.ReflectionFactor.value),e.Shininess&&(s.shininess=e.Shininess.value),e.Specular?s.specular=new Be().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(s.specular=new Be().fromArray(e.SpecularColor.value));const o=this;return Ae.get(t).children.forEach(function(r){const i=r.relationship;switch(i){case"Bump":s.bumpMap=o.getTexture(n,r.ID);break;case"Maya|TEX_ao_map":s.aoMap=o.getTexture(n,r.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=o.getTexture(n,r.ID),s.map!==void 0&&("colorSpace"in s.map?s.map.colorSpace="srgb":s.map.encoding=3001);break;case"DisplacementColor":s.displacementMap=o.getTexture(n,r.ID);break;case"EmissiveColor":s.emissiveMap=o.getTexture(n,r.ID),s.emissiveMap!==void 0&&("colorSpace"in s.emissiveMap?s.emissiveMap.colorSpace="srgb":s.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=o.getTexture(n,r.ID);break;case"ReflectionColor":s.envMap=o.getTexture(n,r.ID),s.envMap!==void 0&&(s.envMap.mapping=Xn,"colorSpace"in s.envMap?s.envMap.colorSpace="srgb":s.envMap.encoding=3001);break;case"SpecularColor":s.specularMap=o.getTexture(n,r.ID),s.specularMap!==void 0&&("colorSpace"in s.specularMap?s.specularMap.colorSpace="srgb":s.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":s.alphaMap=o.getTexture(n,r.ID),s.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",i);break}}),s}getTexture(e,n){return"LayeredTexture"in $.Objects&&n in $.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=Ae.get(n).children[0].ID),e.get(n)}parseDeformers(){const e={},n={};if("Deformer"in $.Objects){const t=$.Objects.Deformer;for(const s in t){const o=t[s],r=Ae.get(parseInt(s));if(o.attrType==="Skin"){const i=this.parseSkeleton(r,t);i.ID=s,r.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),i.geometryID=r.parents[0].ID,e[s]=i}else if(o.attrType==="BlendShape"){const i={id:s};i.rawTargets=this.parseMorphTargets(r,t),i.id=s,r.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[s]=i}}}return{skeletons:e,morphTargets:n}}parseSkeleton(e,n){const t=[];return e.children.forEach(function(s){const o=n[s.ID];if(o.attrType!=="Cluster")return;const r={ID:s.ID,indices:[],weights:[],transformLink:new le().fromArray(o.TransformLink.a)};"Indexes"in o&&(r.indices=o.Indexes.a,r.weights=o.Weights.a),t.push(r)}),{rawBones:t,bones:[]}}parseMorphTargets(e,n){const t=[];for(let s=0;s<e.children.length;s++){const o=e.children[s],r=n[o.ID],i={name:r.attrName,initialWeight:r.DeformPercent,id:r.id,fullWeights:r.FullWeights.a};if(r.attrType!=="BlendShapeChannel")return;i.geoID=Ae.get(parseInt(o.ID)).children.filter(function(a){return a.relationship===void 0})[0].ID,t.push(i)}return t}parseScene(e,n,t){me=new ze;const s=this.parseModels(e.skeletons,n,t),o=$.Objects.Model,r=this;s.forEach(function(a){const l=o[a.ID];r.setLookAtProperties(a,l),Ae.get(a.ID).parents.forEach(function(c){const A=s.get(c.ID);A!==void 0&&A.add(a)}),a.parent===null&&me.add(a)}),this.bindSkeleton(e.skeletons,n,s),this.createAmbientLight(),me.traverse(function(a){if(a.userData.transformData){a.parent&&(a.userData.transformData.parentMatrix=a.parent.matrix,a.userData.transformData.parentMatrixWorld=a.parent.matrixWorld);const l=hn(a.userData.transformData);a.applyMatrix4(l),a.updateWorldMatrix()}});const i=new js().parse();me.children.length===1&&me.children[0].isGroup&&(me.children[0].animations=i,me=me.children[0]),me.animations=i}parseModels(e,n,t){const s=new Map,o=$.Objects.Model;for(const r in o){const i=parseInt(r),a=o[r],l=Ae.get(i);let u=this.buildSkeleton(l,e,i,a.attrName);if(!u){switch(a.attrType){case"Camera":u=this.createCamera(l);break;case"Light":u=this.createLight(l);break;case"Mesh":u=this.createMesh(l,n,t);break;case"NurbsCurve":u=this.createCurve(l,n);break;case"LimbNode":case"Root":u=new Tt;break;case"Null":default:u=new ze;break}u.name=a.attrName?$e.sanitizeNodeName(a.attrName):"",u.ID=i}this.getTransformData(u,a),s.set(i,u)}return s}buildSkeleton(e,n,t,s){let o=null;return e.parents.forEach(function(r){for(const i in n){const a=n[i];a.rawBones.forEach(function(l,u){if(l.ID===r.ID){const c=o;o=new Tt,o.matrixWorld.copy(l.transformLink),o.name=s?$e.sanitizeNodeName(s):"",o.ID=t,a.bones[u]=o,c!==null&&o.add(c)}})}}),o}createCamera(e){let n,t;if(e.children.forEach(function(s){const o=$.Objects.NodeAttribute[s.ID];o!==void 0&&(t=o)}),t===void 0)n=new We;else{let s=0;t.CameraProjectionType!==void 0&&t.CameraProjectionType.value===1&&(s=1);let o=1;t.NearPlane!==void 0&&(o=t.NearPlane.value/1e3);let r=1e3;t.FarPlane!==void 0&&(r=t.FarPlane.value/1e3);let i=window.innerWidth,a=window.innerHeight;t.AspectWidth!==void 0&&t.AspectHeight!==void 0&&(i=t.AspectWidth.value,a=t.AspectHeight.value);const l=i/a;let u=45;t.FieldOfView!==void 0&&(u=t.FieldOfView.value);const c=t.FocalLength?t.FocalLength.value:null;switch(s){case 0:n=new ke(u,l,o,r),c!==null&&n.setFocalLength(c);break;case 1:n=new Ne(-i/2,i/2,a/2,-a/2,o,r);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+s+"."),n=new We;break}}return n}createLight(e){let n,t;if(e.children.forEach(function(s){const o=$.Objects.NodeAttribute[s.ID];o!==void 0&&(t=o)}),t===void 0)n=new We;else{let s;t.LightType===void 0?s=0:s=t.LightType.value;let o=16777215;t.Color!==void 0&&(o=new Be().fromArray(t.Color.value));let r=t.Intensity===void 0?1:t.Intensity.value/100;t.CastLightOnObject!==void 0&&t.CastLightOnObject.value===0&&(r=0);let i=0;t.FarAttenuationEnd!==void 0&&(t.EnableFarAttenuation!==void 0&&t.EnableFarAttenuation.value===0?i=0:i=t.FarAttenuationEnd.value);const a=1;switch(s){case 0:n=new Mt(o,r,i,a);break;case 1:n=new Yt(o,r);break;case 2:let l=Math.PI/3;t.InnerAngle!==void 0&&(l=ge.degToRad(t.InnerAngle.value));let u=0;t.OuterAngle!==void 0&&(u=ge.degToRad(t.OuterAngle.value),u=Math.max(u,1)),n=new Qt(o,r,i,l,u,a);break;default:console.warn("THREE.FBXLoader: Unknown light type "+t.LightType.value+", defaulting to a PointLight."),n=new Mt(o,r);break}t.CastShadows!==void 0&&t.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(e,n,t){let s,o=null,r=null;const i=[];return e.children.forEach(function(a){n.has(a.ID)&&(o=n.get(a.ID)),t.has(a.ID)&&i.push(t.get(a.ID))}),i.length>1?r=i:i.length>0?r=i[0]:(r=new pt({color:13421772}),i.push(r)),"color"in o.attributes&&i.forEach(function(a){a.vertexColors=!0}),o.FBX_Deformer?(s=new $t(o,r),s.normalizeSkinWeights()):s=new en(o,r),s}createCurve(e,n){const t=e.children.reduce(function(o,r){return n.has(r.ID)&&(o=n.get(r.ID)),o},null),s=new zt({color:3342591,linewidth:1});return new tn(t,s)}getTransformData(e,n){const t={};"InheritType"in n&&(t.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?t.eulerOrder=fn(n.RotationOrder.value):t.eulerOrder="ZYX","Lcl_Translation"in n&&(t.translation=n.Lcl_Translation.value),"PreRotation"in n&&(t.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(t.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(t.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(t.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(t.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(t.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(t.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(t.rotationPivot=n.RotationPivot.value),e.userData.transformData=t}setLookAtProperties(e,n){"LookAtProperty"in n&&Ae.get(e.ID).children.forEach(function(s){if(s.relationship==="LookAtProperty"){const o=$.Objects.Model[s.ID];if("Lcl_Translation"in o){const r=o.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(r),me.add(e.target)):e.lookAt(new ae().fromArray(r))}}})}bindSkeleton(e,n,t){const s=this.parsePoseNodes();for(const o in e){const r=e[o];Ae.get(parseInt(r.ID)).parents.forEach(function(a){if(n.has(a.ID)){const l=a.ID;Ae.get(l).parents.forEach(function(c){t.has(c.ID)&&t.get(c.ID).bind(new nn(r.bones),s[c.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in $.Objects){const n=$.Objects.Pose;for(const t in n)if(n[t].attrType==="BindPose"&&n[t].NbPoseNodes>0){const s=n[t].PoseNode;Array.isArray(s)?s.forEach(function(o){e[o.Node]=new le().fromArray(o.Matrix.a)}):e[s.Node]=new le().fromArray(s.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in $&&"AmbientColor"in $.GlobalSettings){const e=$.GlobalSettings.AmbientColor.value,n=e[0],t=e[1],s=e[2];if(n!==0||t!==0||s!==0){const o=new Be(n,t,s);me.add(new Qn(o,1))}}}}class Ks{parse(e){const n=new Map;if("Geometry"in $.Objects){const t=$.Objects.Geometry;for(const s in t){const o=Ae.get(parseInt(s)),r=this.parseGeometry(o,t[s],e);n.set(parseInt(s),r)}}return n}parseGeometry(e,n,t){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(e,n,t);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(e,n,t){const s=t.skeletons,o=[],r=e.parents.map(function(c){return $.Objects.Model[c.ID]});if(r.length===0)return;const i=e.children.reduce(function(c,A){return s[A.ID]!==void 0&&(c=s[A.ID]),c},null);e.children.forEach(function(c){t.morphTargets[c.ID]!==void 0&&o.push(t.morphTargets[c.ID])});const a=r[0],l={};"RotationOrder"in a&&(l.eulerOrder=fn(a.RotationOrder.value)),"InheritType"in a&&(l.inheritType=parseInt(a.InheritType.value)),"GeometricTranslation"in a&&(l.translation=a.GeometricTranslation.value),"GeometricRotation"in a&&(l.rotation=a.GeometricRotation.value),"GeometricScaling"in a&&(l.scale=a.GeometricScaling.value);const u=hn(l);return this.genGeometry(n,i,o,u)}genGeometry(e,n,t,s){const o=new we;e.attrName&&(o.name=e.attrName);const r=this.parseGeoNode(e,n),i=this.genBuffers(r),a=new De(i.vertex,3);if(a.applyMatrix4(s),o.setAttribute("position",a),i.colors.length>0&&o.setAttribute("color",new De(i.colors,3)),n&&(o.setAttribute("skinIndex",new Yn(i.weightsIndices,4)),o.setAttribute("skinWeight",new De(i.vertexWeights,4)),o.FBX_Deformer=n),i.normal.length>0){const l=new Pe().getNormalMatrix(s),u=new De(i.normal,3);u.applyNormalMatrix(l),o.setAttribute("normal",u)}if(i.uvs.forEach(function(l,u){let c="uv"+(u+1).toString();u===0&&(c="uv"),o.setAttribute(c,new De(i.uvs[u],2))}),r.material&&r.material.mappingType!=="AllSame"){let l=i.materialIndex[0],u=0;if(i.materialIndex.forEach(function(c,A){c!==l&&(o.addGroup(u,A-u,l),l=c,u=A)}),o.groups.length>0){const c=o.groups[o.groups.length-1],A=c.start+c.count;A!==i.materialIndex.length&&o.addGroup(A,i.materialIndex.length-A,l)}o.groups.length===0&&o.addGroup(0,i.materialIndex.length,i.materialIndex[0])}return this.addMorphTargets(o,e,t,s),o}parseGeoNode(e,n){const t={};if(t.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],t.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(t.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(t.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(t.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){t.uv=[];let s=0;for(;e.LayerElementUV[s];)e.LayerElementUV[s].UV&&t.uv.push(this.parseUVs(e.LayerElementUV[s])),s++}return t.weightTable={},n!==null&&(t.skeleton=n,n.rawBones.forEach(function(s,o){s.indices.forEach(function(r,i){t.weightTable[r]===void 0&&(t.weightTable[r]=[]),t.weightTable[r].push({id:o,weight:s.weights[i]})})})),t}genBuffers(e){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let t=0,s=0,o=!1,r=[],i=[],a=[],l=[],u=[],c=[];const A=this;return e.vertexIndices.forEach(function(B,y){let D,I=!1;B<0&&(B=B^-1,I=!0);let F=[],R=[];if(r.push(B*3,B*3+1,B*3+2),e.color){const T=it(y,t,B,e.color);a.push(T[0],T[1],T[2])}if(e.skeleton){if(e.weightTable[B]!==void 0&&e.weightTable[B].forEach(function(T){R.push(T.weight),F.push(T.id)}),R.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);const T=[0,0,0,0],b=[0,0,0,0];R.forEach(function(H,P){let O=H,J=F[P];b.forEach(function(Q,S,z){if(O>Q){z[S]=O,O=Q;const U=T[S];T[S]=J,J=U}})}),F=T,R=b}for(;R.length<4;)R.push(0),F.push(0);for(let T=0;T<4;++T)u.push(R[T]),c.push(F[T])}if(e.normal){const T=it(y,t,B,e.normal);i.push(T[0],T[1],T[2])}e.material&&e.material.mappingType!=="AllSame"&&(D=it(y,t,B,e.material)[0]),e.uv&&e.uv.forEach(function(T,b){const H=it(y,t,B,T);l[b]===void 0&&(l[b]=[]),l[b].push(H[0]),l[b].push(H[1])}),s++,I&&(A.genFace(n,e,r,D,i,a,l,u,c,s),t++,s=0,r=[],i=[],a=[],l=[],u=[],c=[])}),n}genFace(e,n,t,s,o,r,i,a,l,u){for(let c=2;c<u;c++)e.vertex.push(n.vertexPositions[t[0]]),e.vertex.push(n.vertexPositions[t[1]]),e.vertex.push(n.vertexPositions[t[2]]),e.vertex.push(n.vertexPositions[t[(c-1)*3]]),e.vertex.push(n.vertexPositions[t[(c-1)*3+1]]),e.vertex.push(n.vertexPositions[t[(c-1)*3+2]]),e.vertex.push(n.vertexPositions[t[c*3]]),e.vertex.push(n.vertexPositions[t[c*3+1]]),e.vertex.push(n.vertexPositions[t[c*3+2]]),n.skeleton&&(e.vertexWeights.push(a[0]),e.vertexWeights.push(a[1]),e.vertexWeights.push(a[2]),e.vertexWeights.push(a[3]),e.vertexWeights.push(a[(c-1)*4]),e.vertexWeights.push(a[(c-1)*4+1]),e.vertexWeights.push(a[(c-1)*4+2]),e.vertexWeights.push(a[(c-1)*4+3]),e.vertexWeights.push(a[c*4]),e.vertexWeights.push(a[c*4+1]),e.vertexWeights.push(a[c*4+2]),e.vertexWeights.push(a[c*4+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[(c-1)*4]),e.weightsIndices.push(l[(c-1)*4+1]),e.weightsIndices.push(l[(c-1)*4+2]),e.weightsIndices.push(l[(c-1)*4+3]),e.weightsIndices.push(l[c*4]),e.weightsIndices.push(l[c*4+1]),e.weightsIndices.push(l[c*4+2]),e.weightsIndices.push(l[c*4+3])),n.color&&(e.colors.push(r[0]),e.colors.push(r[1]),e.colors.push(r[2]),e.colors.push(r[(c-1)*3]),e.colors.push(r[(c-1)*3+1]),e.colors.push(r[(c-1)*3+2]),e.colors.push(r[c*3]),e.colors.push(r[c*3+1]),e.colors.push(r[c*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(e.materialIndex.push(s),e.materialIndex.push(s),e.materialIndex.push(s)),n.normal&&(e.normal.push(o[0]),e.normal.push(o[1]),e.normal.push(o[2]),e.normal.push(o[(c-1)*3]),e.normal.push(o[(c-1)*3+1]),e.normal.push(o[(c-1)*3+2]),e.normal.push(o[c*3]),e.normal.push(o[c*3+1]),e.normal.push(o[c*3+2])),n.uv&&n.uv.forEach(function(A,B){e.uvs[B]===void 0&&(e.uvs[B]=[]),e.uvs[B].push(i[B][0]),e.uvs[B].push(i[B][1]),e.uvs[B].push(i[B][(c-1)*2]),e.uvs[B].push(i[B][(c-1)*2+1]),e.uvs[B].push(i[B][c*2]),e.uvs[B].push(i[B][c*2+1])})}addMorphTargets(e,n,t,s){if(t.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const o=this;t.forEach(function(r){r.rawTargets.forEach(function(i){const a=$.Objects.Geometry[i.geoID];a!==void 0&&o.genMorphGeometry(e,n,a,s,i.name)})})}genMorphGeometry(e,n,t,s,o){const r=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],i=t.Vertices!==void 0?t.Vertices.a:[],a=t.Indexes!==void 0?t.Indexes.a:[],l=e.attributes.position.count*3,u=new Float32Array(l);for(let y=0;y<a.length;y++){const D=a[y]*3;u[D]=i[y*3],u[D+1]=i[y*3+1],u[D+2]=i[y*3+2]}const c={vertexIndices:r,vertexPositions:u},A=this.genBuffers(c),B=new De(A.vertex,3);B.name=o||t.attrName,B.applyMatrix4(s),e.morphAttributes.position.push(B)}parseNormals(e){const n=e.MappingInformationType,t=e.ReferenceInformationType,s=e.Normals.a;let o=[];return t==="IndexToDirect"&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:s,indices:o,mappingType:n,referenceType:t}}parseUVs(e){const n=e.MappingInformationType,t=e.ReferenceInformationType,s=e.UV.a;let o=[];return t==="IndexToDirect"&&(o=e.UVIndex.a),{dataSize:2,buffer:s,indices:o,mappingType:n,referenceType:t}}parseVertexColors(e){const n=e.MappingInformationType,t=e.ReferenceInformationType,s=e.Colors.a;let o=[];return t==="IndexToDirect"&&(o=e.ColorIndex.a),{dataSize:4,buffer:s,indices:o,mappingType:n,referenceType:t}}parseMaterialIndices(e){const n=e.MappingInformationType,t=e.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:t};const s=e.Materials.a,o=[];for(let r=0;r<s.length;++r)o.push(r);return{dataSize:1,buffer:s,indices:o,mappingType:n,referenceType:t}}parseNurbsGeometry(e){if(Nt===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new we;const n=parseInt(e.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new we;const t=n-1,s=e.KnotVector.a,o=[],r=e.Points.a;for(let c=0,A=r.length;c<A;c+=4)o.push(new ut().fromArray(r,c));let i,a;if(e.Form==="Closed")o.push(o[0]);else if(e.Form==="Periodic"){i=t,a=s.length-1-i;for(let c=0;c<t;++c)o.push(o[c])}const u=new Nt(t,s,o,i,a).getPoints(o.length*12);return new we().setFromPoints(u)}}class js{parse(){const e=[],n=this.parseClips();if(n!==void 0)for(const t in n){const s=n[t],o=this.addClip(s);e.push(o)}return e}parseClips(){if($.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const e=$.Objects.AnimationCurveNode,n=new Map;for(const t in e){const s=e[t];if(s.attrName.match(/S|R|T|DeformPercent/)!==null){const o={id:s.id,attr:s.attrName,curves:{}};n.set(o.id,o)}}return n}parseAnimationCurves(e){const n=$.Objects.AnimationCurve;for(const t in n){const s={id:n[t].id,times:n[t].KeyTime.a.map(Vs),values:n[t].KeyValueFloat.a},o=Ae.get(s.id);if(o!==void 0){const r=o.parents[0].ID,i=o.parents[0].relationship;i.match(/X/)?e.get(r).curves.x=s:i.match(/Y/)?e.get(r).curves.y=s:i.match(/Z/)?e.get(r).curves.z=s:i.match(/d|DeformPercent/)&&e.has(r)&&(e.get(r).curves.morph=s)}}}parseAnimationLayers(e){const n=$.Objects.AnimationLayer,t=new Map;for(const s in n){const o=[],r=Ae.get(parseInt(s));r!==void 0&&(r.children.forEach(function(a,l){if(e.has(a.ID)){const u=e.get(a.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(o[l]===void 0){const c=Ae.get(a.ID).parents.filter(function(A){return A.relationship!==void 0})[0].ID;if(c!==void 0){const A=$.Objects.Model[c.toString()];if(A===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",a);return}const B={modelName:A.attrName?$e.sanitizeNodeName(A.attrName):"",ID:A.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};me.traverse(function(y){y.ID===A.id&&(B.transform=y.matrix,y.userData.transformData&&(B.eulerOrder=y.userData.transformData.eulerOrder))}),B.transform||(B.transform=new le),"PreRotation"in A&&(B.preRotation=A.PreRotation.value),"PostRotation"in A&&(B.postRotation=A.PostRotation.value),o[l]=B}}o[l]&&(o[l][u.attr]=u)}else if(u.curves.morph!==void 0){if(o[l]===void 0){const c=Ae.get(a.ID).parents.filter(function(F){return F.relationship!==void 0})[0].ID,A=Ae.get(c).parents[0].ID,B=Ae.get(A).parents[0].ID,y=Ae.get(B).parents[0].ID,D=$.Objects.Model[y],I={modelName:D.attrName?$e.sanitizeNodeName(D.attrName):"",morphName:$.Objects.Deformer[c].attrName};o[l]=I}o[l][u.attr]=u}}}),t.set(parseInt(s),o))}return t}parseAnimStacks(e){const n=$.Objects.AnimationStack,t={};for(const s in n){const o=Ae.get(parseInt(s)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const r=e.get(o[0].ID);t[s]={name:n[s].attrName,layer:r}}return t}addClip(e){let n=[];const t=this;return e.layer.forEach(function(s){n=n.concat(t.generateTracks(s))}),new on(e.name,-1,n)}generateTracks(e){const n=[];let t=new ae,s=new ve,o=new ae;if(e.transform&&e.transform.decompose(t,s,o),t=t.toArray(),s=new Ve().setFromQuaternion(s,e.eulerOrder).toArray(),o=o.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const r=this.generateVectorTrack(e.modelName,e.T.curves,t,"position");r!==void 0&&n.push(r)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const r=this.generateRotationTrack(e.modelName,e.R.curves,s,e.preRotation,e.postRotation,e.eulerOrder);r!==void 0&&n.push(r)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const r=this.generateVectorTrack(e.modelName,e.S.curves,o,"scale");r!==void 0&&n.push(r)}if(e.DeformPercent!==void 0){const r=this.generateMorphTrack(e);r!==void 0&&n.push(r)}return n}generateVectorTrack(e,n,t,s){const o=this.getTimesForAllAxes(n),r=this.getKeyframeTrackValues(o,n,t);return new rn(e+"."+s,o,r)}generateRotationTrack(e,n,t,s,o,r){n.x!==void 0&&(this.interpolateRotations(n.x),n.x.values=n.x.values.map(ge.degToRad)),n.y!==void 0&&(this.interpolateRotations(n.y),n.y.values=n.y.values.map(ge.degToRad)),n.z!==void 0&&(this.interpolateRotations(n.z),n.z.values=n.z.values.map(ge.degToRad));const i=this.getTimesForAllAxes(n),a=this.getKeyframeTrackValues(i,n,t);s!==void 0&&(s=s.map(ge.degToRad),s.push(r),s=new Ve().fromArray(s),s=new ve().setFromEuler(s)),o!==void 0&&(o=o.map(ge.degToRad),o.push(r),o=new Ve().fromArray(o),o=new ve().setFromEuler(o).invert());const l=new ve,u=new Ve,c=[];for(let A=0;A<a.length;A+=3)u.set(a[A],a[A+1],a[A+2],r),l.setFromEuler(u),s!==void 0&&l.premultiply(s),o!==void 0&&l.multiply(o),l.toArray(c,A/3*4);return new Dt(e+".quaternion",i,c)}generateMorphTrack(e){const n=e.DeformPercent.curves.morph,t=n.values.map(function(o){return o/100}),s=me.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new an(e.modelName+".morphTargetInfluences["+s+"]",n.times,t)}getTimesForAllAxes(e){let n=[];if(e.x!==void 0&&(n=n.concat(e.x.times)),e.y!==void 0&&(n=n.concat(e.y.times)),e.z!==void 0&&(n=n.concat(e.z.times)),n=n.sort(function(t,s){return t-s}),n.length>1){let t=1,s=n[0];for(let o=1;o<n.length;o++){const r=n[o];r!==s&&(n[t]=r,s=r,t++)}n=n.slice(0,t)}return n}getKeyframeTrackValues(e,n,t){const s=t,o=[];let r=-1,i=-1,a=-1;return e.forEach(function(l){if(n.x&&(r=n.x.times.indexOf(l)),n.y&&(i=n.y.times.indexOf(l)),n.z&&(a=n.z.times.indexOf(l)),r!==-1){const u=n.x.values[r];o.push(u),s[0]=u}else o.push(s[0]);if(i!==-1){const u=n.y.values[i];o.push(u),s[1]=u}else o.push(s[1]);if(a!==-1){const u=n.z.values[a];o.push(u),s[2]=u}else o.push(s[2])}),o}interpolateRotations(e){for(let n=1;n<e.values.length;n++){const t=e.values[n-1],s=e.values[n]-t,o=Math.abs(s);if(o>=180){const r=o/180,i=s/r;let a=t+i;const l=e.times[n-1],c=(e.times[n]-l)/r;let A=l+c;const B=[],y=[];for(;A<e.times[n];)B.push(A),A+=c,y.push(a),a+=i;e.times=_t(e.times,n,B),e.values=_t(e.values,n,y)}}}}class _s{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,n){this.currentProp=e,this.currentPropName=n}parse(e){this.currentIndent=0,this.allNodes=new An,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,t=e.split(/[\r\n]+/);return t.forEach(function(s,o){const r=s.match(/^[\s\t]*;/),i=s.match(/^[\s\t]*$/);if(r||i)return;const a=s.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),l=s.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=s.match("^\\t{"+(n.currentIndent-1)+"}}");a?n.parseNodeBegin(s,a):l?n.parseNodeProperty(s,l,t[++o]):u?n.popStack():s.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(s)}),this.allNodes}parseNodeBegin(e,n){const t=n[1].trim().replace(/^"/,"").replace(/"$/,""),s=n[2].split(",").map(function(a){return a.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:t},r=this.parseNodeAttr(s),i=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(t,o):t in i?(t==="PoseNode"?i.PoseNode.push(o):i[t].id!==void 0&&(i[t]={},i[t][i[t].id]=i[t]),r.id!==""&&(i[t][r.id]=o)):typeof r.id=="number"?(i[t]={},i[t][r.id]=o):t!=="Properties70"&&(t==="PoseNode"?i[t]=[o]:i[t]=o),typeof r.id=="number"&&(o.id=r.id),r.name!==""&&(o.attrName=r.name),r.type!==""&&(o.attrType=r.type),this.pushStack(o)}parseNodeAttr(e){let n=e[0];e[0]!==""&&(n=parseInt(e[0]),isNaN(n)&&(n=e[0]));let t="",s="";return e.length>1&&(t=e[1].replace(/^(\w+)::/,""),s=e[2]),{id:n,name:t,type:s}}parseNodeProperty(e,n,t){let s=n[1].replace(/^"/,"").replace(/"$/,"").trim(),o=n[2].replace(/^"/,"").replace(/"$/,"").trim();s==="Content"&&o===","&&(o=t.replace(/"/g,"").replace(/,$/,"").trim());const r=this.getCurrentNode();if(r.name==="Properties70"){this.parseNodeSpecialProperty(e,s,o);return}if(s==="C"){const a=o.split(",").slice(1),l=parseInt(a[0]),u=parseInt(a[1]);let c=o.split(",").slice(3);c=c.map(function(A){return A.trim().replace(/^"/,"")}),s="connections",o=[l,u],Zs(o,c),r[s]===void 0&&(r[s]=[])}s==="Node"&&(r.id=o),s in r&&Array.isArray(r[s])?r[s].push(o):s!=="a"?r[s]=o:r.a=o,this.setCurrentProp(r,s),s==="a"&&o.slice(-1)!==","&&(r.a=yt(o))}parseNodePropertyContinued(e){const n=this.getCurrentNode();n.a+=e,e.slice(-1)!==","&&(n.a=yt(n.a))}parseNodeSpecialProperty(e,n,t){const s=t.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=s[0],r=s[1],i=s[2],a=s[3];let l=s[4];switch(r){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=yt(l);break}this.getPrevNode()[o]={type:r,type2:i,flag:a,value:l},this.setCurrentProp(this.getPrevNode(),o)}}class Xs{parse(e){const n=new Kt(e);n.skip(23);const t=n.getUint32();if(t<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+t);const s=new An;for(;!this.endOfContent(n);){const o=this.parseNode(n,t);o!==null&&s.add(o.name,o)}return s}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,n){const t={},s=n>=7500?e.getUint64():e.getUint32(),o=n>=7500?e.getUint64():e.getUint32();n>=7500?e.getUint64():e.getUint32();const r=e.getUint8(),i=e.getString(r);if(s===0)return null;const a=[];for(let A=0;A<o;A++)a.push(this.parseProperty(e));const l=a.length>0?a[0]:"",u=a.length>1?a[1]:"",c=a.length>2?a[2]:"";for(t.singleProperty=o===1&&e.getOffset()===s;s>e.getOffset();){const A=this.parseNode(e,n);A!==null&&this.parseSubNode(i,t,A)}return t.propertyList=a,typeof l=="number"&&(t.id=l),u!==""&&(t.attrName=u),c!==""&&(t.attrType=c),i!==""&&(t.name=i),t}parseSubNode(e,n,t){if(t.singleProperty===!0){const s=t.propertyList[0];Array.isArray(s)?(n[t.name]=t,t.a=s):n[t.name]=s}else if(e==="Connections"&&t.name==="C"){const s=[];t.propertyList.forEach(function(o,r){r!==0&&s.push(o)}),n.connections===void 0&&(n.connections=[]),n.connections.push(s)}else if(t.name==="Properties70")Object.keys(t).forEach(function(o){n[o]=t[o]});else if(e==="Properties70"&&t.name==="P"){let s=t.propertyList[0],o=t.propertyList[1];const r=t.propertyList[2],i=t.propertyList[3];let a;s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?a=[t.propertyList[4],t.propertyList[5],t.propertyList[6]]:a=t.propertyList[4],n[s]={type:o,type2:r,flag:i,value:a}}else n[t.name]===void 0?typeof t.id=="number"?(n[t.name]={},n[t.name][t.id]=t):n[t.name]=t:t.name==="PoseNode"?(Array.isArray(n[t.name])||(n[t.name]=[n[t.name]]),n[t.name].push(t)):n[t.name][t.id]===void 0&&(n[t.name][t.id]=t)}parseProperty(e){const n=e.getString(1);let t;switch(n){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return t=e.getUint32(),e.getArrayBuffer(t);case"S":return t=e.getUint32(),e.getString(t);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const s=e.getUint32(),o=e.getUint32(),r=e.getUint32();if(o===0)switch(n){case"b":case"c":return e.getBooleanArray(s);case"d":return e.getFloat64Array(s);case"f":return e.getFloat32Array(s);case"i":return e.getInt32Array(s);case"l":return e.getInt64Array(s)}const i=zn(new Uint8Array(e.getArrayBuffer(r))),a=new Kt(i.buffer);switch(n){case"b":case"c":return a.getBooleanArray(s);case"d":return a.getFloat64Array(s);case"f":return a.getFloat32Array(s);case"i":return a.getInt32Array(s);case"l":return a.getInt64Array(s)}default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class Kt{constructor(e,n){this.dv=new DataView(e),this.offset=0,this.littleEndian=n!==void 0?n:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const n=[];for(let t=0;t<e;t++)n.push(this.getBoolean());return n}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const n=[];for(let t=0;t<e;t++)n.push(this.getInt32());return n}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n&2147483648?(n=~n&4294967295,e=~e&4294967295,e===4294967295&&(n=n+1&4294967295),e=e+1&4294967295,-(n*4294967296+e)):n*4294967296+e}getInt64Array(e){const n=[];for(let t=0;t<e;t++)n.push(this.getInt64());return n}getUint64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const n=[];for(let t=0;t<e;t++)n.push(this.getFloat32());return n}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const n=[];for(let t=0;t<e;t++)n.push(this.getFloat64());return n}getArrayBuffer(e){const n=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}getString(e){let n=[];for(let s=0;s<e;s++)n[s]=this.getUint8();const t=n.indexOf(0);return t>=0&&(n=n.slice(0,t)),Ee.decodeText(new Uint8Array(n))}}class An{add(e,n){this[e]=n}}function Qs(p){const e="Kaydara FBX Binary  \0";return p.byteLength>=e.length&&e===pn(p,0,e.length)}function Ys(p){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function t(s){const o=p[s-1];return p=p.slice(n+s),n++,o}for(let s=0;s<e.length;++s)if(t(1)===e[s])return!1;return!0}function jt(p){const e=/FBXVersion: (\d+)/,n=p.match(e);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Vs(p){return p/46186158e3}const Ws=[];function it(p,e,n,t){let s;switch(t.mappingType){case"ByPolygonVertex":s=p;break;case"ByPolygon":s=e;break;case"ByVertice":s=n;break;case"AllSame":s=t.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+t.mappingType)}t.referenceType==="IndexToDirect"&&(s=t.indices[s]);const o=s*t.dataSize,r=o+t.dataSize;return zs(Ws,t.buffer,o,r)}const gt=new Ve,Ue=new ae;function hn(p){const e=new le,n=new le,t=new le,s=new le,o=new le,r=new le,i=new le,a=new le,l=new le,u=new le,c=new le,A=new le,B=p.inheritType?p.inheritType:0;if(p.translation&&e.setPosition(Ue.fromArray(p.translation)),p.preRotation){const S=p.preRotation.map(ge.degToRad);S.push(p.eulerOrder),n.makeRotationFromEuler(gt.fromArray(S))}if(p.rotation){const S=p.rotation.map(ge.degToRad);S.push(p.eulerOrder),t.makeRotationFromEuler(gt.fromArray(S))}if(p.postRotation){const S=p.postRotation.map(ge.degToRad);S.push(p.eulerOrder),s.makeRotationFromEuler(gt.fromArray(S)),s.invert()}p.scale&&o.scale(Ue.fromArray(p.scale)),p.scalingOffset&&i.setPosition(Ue.fromArray(p.scalingOffset)),p.scalingPivot&&r.setPosition(Ue.fromArray(p.scalingPivot)),p.rotationOffset&&a.setPosition(Ue.fromArray(p.rotationOffset)),p.rotationPivot&&l.setPosition(Ue.fromArray(p.rotationPivot)),p.parentMatrixWorld&&(c.copy(p.parentMatrix),u.copy(p.parentMatrixWorld));const y=n.clone().multiply(t).multiply(s),D=new le;D.extractRotation(u);const I=new le;I.copyPosition(u);const F=I.clone().invert().multiply(u),R=D.clone().invert().multiply(F),T=o,b=new le;if(B===0)b.copy(D).multiply(y).multiply(R).multiply(T);else if(B===1)b.copy(D).multiply(R).multiply(y).multiply(T);else{const z=new le().scale(new ae().setFromMatrixScale(c)).clone().invert(),U=R.clone().multiply(z);b.copy(D).multiply(y).multiply(U).multiply(T)}const H=l.clone().invert(),P=r.clone().invert();let O=e.clone().multiply(a).multiply(l).multiply(n).multiply(t).multiply(s).multiply(H).multiply(i).multiply(r).multiply(o).multiply(P);const J=new le().copyPosition(O),Q=u.clone().multiply(J);return A.copyPosition(Q),O=A.clone().multiply(b),O.premultiply(u.invert()),O}function fn(p){p=p||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return p===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[p]}function yt(p){return p.split(",").map(function(n){return parseFloat(n)})}function pn(p,e,n){return e===void 0&&(e=0),n===void 0&&(n=p.byteLength),Ee.decodeText(new Uint8Array(p,e,n))}function Zs(p,e){for(let n=0,t=p.length,s=e.length;n<s;n++,t++)p[t]=e[n]}function zs(p,e,n,t){for(let s=n,o=0;s<t;s++,o++)p[o]=e[s];return p}function _t(p,e,n){return p.slice(0,e).concat(n).concat(p.slice(e))}class Bn extends lt{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,n,t,s){const o=this,r=new je(o.manager);r.setPath(o.path),r.setRequestHeader(o.requestHeader),r.setWithCredentials(o.withCredentials),r.load(e,function(i){try{n(o.parse(i))}catch(a){s?s(a):console.error(a),o.manager.itemError(e)}},t,s)}parse(e){const n=this;function t(M,E){if(M.nodeType!==1)return;const h=b(M);let g=!0,G=null;switch(M.nodeName){case"svg":break;case"style":o(M);break;case"g":E=y(M,E);break;case"path":E=y(M,E),M.hasAttribute("d")&&(G=s(M));break;case"rect":E=y(M,E),G=a(M);break;case"polygon":E=y(M,E),G=l(M);break;case"polyline":E=y(M,E),G=u(M);break;case"circle":E=y(M,E),G=c(M);break;case"ellipse":E=y(M,E),G=A(M);break;case"line":E=y(M,E),G=B(M);break;case"defs":g=!1;break;case"mask":g=!1;break;case"use":E=y(M,E);const m=M.href.baseVal.substring(1),x=M.viewportElement.getElementById(m);x?t(x,E):console.warn("SVGLoader: 'use node' references non-existent node id: "+m);break}if(G&&(E.fill!==void 0&&E.fill!=="none"&&G.color.setStyle(E.fill),P(G,ce),S.push(G),G.userData={node:M,style:E}),g){const m=M.childNodes;for(let x=0;x<m.length;x++)t(m[x],E)}h&&(U.pop(),U.length>0?ce.copy(U[U.length-1]):ce.identity())}function s(M){const E=new Le,h=new Z,g=new Z,G=new Z;let m=!0,x=!1;const j=M.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi);for(let _=0,k=j.length;_<k;_++){const se=j[_],w=se.charAt(0),N=se.substr(1).trim();m===!0&&(x=!0,m=!1);let d;switch(w){case"M":d=I(N);for(let f=0,K=d.length;f<K;f+=2)h.x=d[f+0],h.y=d[f+1],g.x=h.x,g.y=h.y,f===0?E.moveTo(h.x,h.y):E.lineTo(h.x,h.y),f===0&&G.copy(h);break;case"H":d=I(N);for(let f=0,K=d.length;f<K;f++)h.x=d[f],g.x=h.x,g.y=h.y,E.lineTo(h.x,h.y),f===0&&x===!0&&G.copy(h);break;case"V":d=I(N);for(let f=0,K=d.length;f<K;f++)h.y=d[f],g.x=h.x,g.y=h.y,E.lineTo(h.x,h.y),f===0&&x===!0&&G.copy(h);break;case"L":d=I(N);for(let f=0,K=d.length;f<K;f+=2)h.x=d[f+0],h.y=d[f+1],g.x=h.x,g.y=h.y,E.lineTo(h.x,h.y),f===0&&x===!0&&G.copy(h);break;case"C":d=I(N);for(let f=0,K=d.length;f<K;f+=6)E.bezierCurveTo(d[f+0],d[f+1],d[f+2],d[f+3],d[f+4],d[f+5]),g.x=d[f+2],g.y=d[f+3],h.x=d[f+4],h.y=d[f+5],f===0&&x===!0&&G.copy(h);break;case"S":d=I(N);for(let f=0,K=d.length;f<K;f+=4)E.bezierCurveTo(D(h.x,g.x),D(h.y,g.y),d[f+0],d[f+1],d[f+2],d[f+3]),g.x=d[f+0],g.y=d[f+1],h.x=d[f+2],h.y=d[f+3],f===0&&x===!0&&G.copy(h);break;case"Q":d=I(N);for(let f=0,K=d.length;f<K;f+=4)E.quadraticCurveTo(d[f+0],d[f+1],d[f+2],d[f+3]),g.x=d[f+0],g.y=d[f+1],h.x=d[f+2],h.y=d[f+3],f===0&&x===!0&&G.copy(h);break;case"T":d=I(N);for(let f=0,K=d.length;f<K;f+=2){const ee=D(h.x,g.x),ue=D(h.y,g.y);E.quadraticCurveTo(ee,ue,d[f+0],d[f+1]),g.x=ee,g.y=ue,h.x=d[f+0],h.y=d[f+1],f===0&&x===!0&&G.copy(h)}break;case"A":d=I(N,[3,4],7);for(let f=0,K=d.length;f<K;f+=7){if(d[f+5]==h.x&&d[f+6]==h.y)continue;const ee=h.clone();h.x=d[f+5],h.y=d[f+6],g.x=h.x,g.y=h.y,r(E,d[f],d[f+1],d[f+2],d[f+3],d[f+4],ee,h),f===0&&x===!0&&G.copy(h)}break;case"m":d=I(N);for(let f=0,K=d.length;f<K;f+=2)h.x+=d[f+0],h.y+=d[f+1],g.x=h.x,g.y=h.y,f===0?E.moveTo(h.x,h.y):E.lineTo(h.x,h.y),f===0&&G.copy(h);break;case"h":d=I(N);for(let f=0,K=d.length;f<K;f++)h.x+=d[f],g.x=h.x,g.y=h.y,E.lineTo(h.x,h.y),f===0&&x===!0&&G.copy(h);break;case"v":d=I(N);for(let f=0,K=d.length;f<K;f++)h.y+=d[f],g.x=h.x,g.y=h.y,E.lineTo(h.x,h.y),f===0&&x===!0&&G.copy(h);break;case"l":d=I(N);for(let f=0,K=d.length;f<K;f+=2)h.x+=d[f+0],h.y+=d[f+1],g.x=h.x,g.y=h.y,E.lineTo(h.x,h.y),f===0&&x===!0&&G.copy(h);break;case"c":d=I(N);for(let f=0,K=d.length;f<K;f+=6)E.bezierCurveTo(h.x+d[f+0],h.y+d[f+1],h.x+d[f+2],h.y+d[f+3],h.x+d[f+4],h.y+d[f+5]),g.x=h.x+d[f+2],g.y=h.y+d[f+3],h.x+=d[f+4],h.y+=d[f+5],f===0&&x===!0&&G.copy(h);break;case"s":d=I(N);for(let f=0,K=d.length;f<K;f+=4)E.bezierCurveTo(D(h.x,g.x),D(h.y,g.y),h.x+d[f+0],h.y+d[f+1],h.x+d[f+2],h.y+d[f+3]),g.x=h.x+d[f+0],g.y=h.y+d[f+1],h.x+=d[f+2],h.y+=d[f+3],f===0&&x===!0&&G.copy(h);break;case"q":d=I(N);for(let f=0,K=d.length;f<K;f+=4)E.quadraticCurveTo(h.x+d[f+0],h.y+d[f+1],h.x+d[f+2],h.y+d[f+3]),g.x=h.x+d[f+0],g.y=h.y+d[f+1],h.x+=d[f+2],h.y+=d[f+3],f===0&&x===!0&&G.copy(h);break;case"t":d=I(N);for(let f=0,K=d.length;f<K;f+=2){const ee=D(h.x,g.x),ue=D(h.y,g.y);E.quadraticCurveTo(ee,ue,h.x+d[f+0],h.y+d[f+1]),g.x=ee,g.y=ue,h.x=h.x+d[f+0],h.y=h.y+d[f+1],f===0&&x===!0&&G.copy(h)}break;case"a":d=I(N,[3,4],7);for(let f=0,K=d.length;f<K;f+=7){if(d[f+5]==0&&d[f+6]==0)continue;const ee=h.clone();h.x+=d[f+5],h.y+=d[f+6],g.x=h.x,g.y=h.y,r(E,d[f],d[f+1],d[f+2],d[f+3],d[f+4],ee,h),f===0&&x===!0&&G.copy(h)}break;case"Z":case"z":E.currentPath.autoClose=!0,E.currentPath.curves.length>0&&(h.copy(G),E.currentPath.currentPoint.copy(h),m=!0);break;default:console.warn(se)}x=!1}return E}function o(M){if(!(!M.sheet||!M.sheet.cssRules||!M.sheet.cssRules.length))for(let E=0;E<M.sheet.cssRules.length;E++){const h=M.sheet.cssRules[E];if(h.type!==1)continue;const g=h.selectorText.split(/,/gm).filter(Boolean).map(G=>G.trim());for(let G=0;G<g.length;G++)z[g[G]]=Object.assign(z[g[G]]||{},h.style)}}function r(M,E,h,g,G,m,x,W){if(E==0||h==0){M.lineTo(W.x,W.y);return}g=g*Math.PI/180,E=Math.abs(E),h=Math.abs(h);const j=(x.x-W.x)/2,_=(x.y-W.y)/2,k=Math.cos(g)*j+Math.sin(g)*_,se=-Math.sin(g)*j+Math.cos(g)*_;let w=E*E,N=h*h;const d=k*k,f=se*se,K=d/w+f/N;if(K>1){const Se=Math.sqrt(K);E=Se*E,h=Se*h,w=E*E,N=h*h}const ee=w*f+N*d,ue=(w*N-ee)/ee;let he=Math.sqrt(Math.max(0,ue));G===m&&(he=-he);const de=he*E*se/h,Ie=-he*h*k/E,et=Math.cos(g)*de-Math.sin(g)*Ie+(x.x+W.x)/2,At=Math.sin(g)*de+Math.cos(g)*Ie+(x.y+W.y)/2,tt=i(1,0,(k-de)/E,(se-Ie)/h),nt=i((k-de)/E,(se-Ie)/h,(-k-de)/E,(-se-Ie)/h)%(Math.PI*2);M.currentPath.absellipse(et,At,E,h,tt,tt+nt,m===0,g)}function i(M,E,h,g){const G=M*h+E*g,m=Math.sqrt(M*M+E*E)*Math.sqrt(h*h+g*g);let x=Math.acos(Math.max(-1,Math.min(1,G/m)));return M*g-E*h<0&&(x=-x),x}function a(M){const E=T(M.getAttribute("x")||0),h=T(M.getAttribute("y")||0),g=T(M.getAttribute("rx")||M.getAttribute("ry")||0),G=T(M.getAttribute("ry")||M.getAttribute("rx")||0),m=T(M.getAttribute("width")),x=T(M.getAttribute("height")),W=1-.551915024494,j=new Le;return j.moveTo(E+g,h),j.lineTo(E+m-g,h),(g!==0||G!==0)&&j.bezierCurveTo(E+m-g*W,h,E+m,h+G*W,E+m,h+G),j.lineTo(E+m,h+x-G),(g!==0||G!==0)&&j.bezierCurveTo(E+m,h+x-G*W,E+m-g*W,h+x,E+m-g,h+x),j.lineTo(E+g,h+x),(g!==0||G!==0)&&j.bezierCurveTo(E+g*W,h+x,E,h+x-G*W,E,h+x-G),j.lineTo(E,h+G),(g!==0||G!==0)&&j.bezierCurveTo(E,h+G*W,E+g*W,h,E+g,h),j}function l(M){function E(m,x,W){const j=T(x),_=T(W);G===0?g.moveTo(j,_):g.lineTo(j,_),G++}const h=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,g=new Le;let G=0;return M.getAttribute("points").replace(h,E),g.currentPath.autoClose=!0,g}function u(M){function E(m,x,W){const j=T(x),_=T(W);G===0?g.moveTo(j,_):g.lineTo(j,_),G++}const h=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,g=new Le;let G=0;return M.getAttribute("points").replace(h,E),g.currentPath.autoClose=!1,g}function c(M){const E=T(M.getAttribute("cx")||0),h=T(M.getAttribute("cy")||0),g=T(M.getAttribute("r")||0),G=new Bt;G.absarc(E,h,g,0,Math.PI*2);const m=new Le;return m.subPaths.push(G),m}function A(M){const E=T(M.getAttribute("cx")||0),h=T(M.getAttribute("cy")||0),g=T(M.getAttribute("rx")||0),G=T(M.getAttribute("ry")||0),m=new Bt;m.absellipse(E,h,g,G,0,Math.PI*2);const x=new Le;return x.subPaths.push(m),x}function B(M){const E=T(M.getAttribute("x1")||0),h=T(M.getAttribute("y1")||0),g=T(M.getAttribute("x2")||0),G=T(M.getAttribute("y2")||0),m=new Le;return m.moveTo(E,h),m.lineTo(g,G),m.currentPath.autoClose=!1,m}function y(M,E){E=Object.assign({},E);let h={};if(M.hasAttribute("class")){const x=M.getAttribute("class").split(/\s/).filter(Boolean).map(W=>W.trim());for(let W=0;W<x.length;W++)h=Object.assign(h,z["."+x[W]])}M.hasAttribute("id")&&(h=Object.assign(h,z["#"+M.getAttribute("id")]));function g(x,W,j){j===void 0&&(j=function(k){return k.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),k}),M.hasAttribute(x)&&(E[W]=j(M.getAttribute(x))),h[x]&&(E[W]=j(h[x])),M.style&&M.style[x]!==""&&(E[W]=j(M.style[x]))}function G(x){return Math.max(0,Math.min(1,T(x)))}function m(x){return Math.max(0,T(x))}return g("fill","fill"),g("fill-opacity","fillOpacity",G),g("fill-rule","fillRule"),g("opacity","opacity",G),g("stroke","stroke"),g("stroke-opacity","strokeOpacity",G),g("stroke-width","strokeWidth",m),g("stroke-linejoin","strokeLineJoin"),g("stroke-linecap","strokeLineCap"),g("stroke-miterlimit","strokeMiterLimit",m),g("visibility","visibility"),E}function D(M,E){return M-(E-M)}function I(M,E,h){if(typeof M!="string")throw new TypeError("Invalid input: "+typeof M);const g={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},G=0,m=1,x=2,W=3;let j=G,_=!0,k="",se="";const w=[];function N(ee,ue,he){const de=new SyntaxError('Unexpected character "'+ee+'" at index '+ue+".");throw de.partial=he,de}function d(){k!==""&&(se===""?w.push(Number(k)):w.push(Number(k)*Math.pow(10,Number(se)))),k="",se=""}let f;const K=M.length;for(let ee=0;ee<K;ee++){if(f=M[ee],Array.isArray(E)&&E.includes(w.length%h)&&g.FLAGS.test(f)){j=m,k=f,d();continue}if(j===G){if(g.WHITESPACE.test(f))continue;if(g.DIGIT.test(f)||g.SIGN.test(f)){j=m,k=f;continue}if(g.POINT.test(f)){j=x,k=f;continue}g.COMMA.test(f)&&(_&&N(f,ee,w),_=!0)}if(j===m){if(g.DIGIT.test(f)){k+=f;continue}if(g.POINT.test(f)){k+=f,j=x;continue}if(g.EXP.test(f)){j=W;continue}g.SIGN.test(f)&&k.length===1&&g.SIGN.test(k[0])&&N(f,ee,w)}if(j===x){if(g.DIGIT.test(f)){k+=f;continue}if(g.EXP.test(f)){j=W;continue}g.POINT.test(f)&&k[k.length-1]==="."&&N(f,ee,w)}if(j===W){if(g.DIGIT.test(f)){se+=f;continue}if(g.SIGN.test(f)){if(se===""){se+=f;continue}se.length===1&&g.SIGN.test(se)&&N(f,ee,w)}}g.WHITESPACE.test(f)?(d(),j=G,_=!1):g.COMMA.test(f)?(d(),j=G,_=!0):g.SIGN.test(f)?(d(),j=m,k=f):g.POINT.test(f)?(d(),j=x,k=f):N(f,ee,w)}return d(),w}const F=["mm","cm","in","pt","pc","px"],R={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function T(M){let E="px";if(typeof M=="string"||M instanceof String)for(let g=0,G=F.length;g<G;g++){const m=F[g];if(M.endsWith(m)){E=m,M=M.substring(0,M.length-m.length);break}}let h;return E==="px"&&n.defaultUnit!=="px"?h=R.in[n.defaultUnit]/n.defaultDPI:(h=R[E][n.defaultUnit],h<0&&(h=R[E].in*n.defaultDPI)),h*parseFloat(M)}function b(M){if(!(M.hasAttribute("transform")||M.nodeName==="use"&&(M.hasAttribute("x")||M.hasAttribute("y"))))return null;const E=H(M);return U.length>0&&E.premultiply(U[U.length-1]),ce.copy(E),U.push(E),E}function H(M){const E=new Pe,h=q;if(M.nodeName==="use"&&(M.hasAttribute("x")||M.hasAttribute("y"))){const g=T(M.getAttribute("x")),G=T(M.getAttribute("y"));E.translate(g,G)}if(M.hasAttribute("transform")){const g=M.getAttribute("transform").split(")");for(let G=g.length-1;G>=0;G--){const m=g[G].trim();if(m==="")continue;const x=m.indexOf("("),W=m.length;if(x>0&&x<W){const j=m.substr(0,x),_=I(m.substr(x+1,W-x-1));switch(h.identity(),j){case"translate":if(_.length>=1){const k=_[0];let se=k;_.length>=2&&(se=_[1]),h.translate(k,se)}break;case"rotate":if(_.length>=1){let k=0,se=0,w=0;k=-_[0]*Math.PI/180,_.length>=3&&(se=_[1],w=_[2]),ne.identity().translate(-se,-w),re.identity().rotate(k),pe.multiplyMatrices(re,ne),ne.identity().translate(se,w),h.multiplyMatrices(ne,pe)}break;case"scale":if(_.length>=1){const k=_[0];let se=k;_.length>=2&&(se=_[1]),h.scale(k,se)}break;case"skewX":_.length===1&&h.set(1,Math.tan(_[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":_.length===1&&h.set(1,0,0,Math.tan(_[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":_.length===6&&h.set(_[0],_[2],_[4],_[1],_[3],_[5],0,0,1);break}}E.premultiply(h)}}return E}function P(M,E){function h(m){v.set(m.x,m.y,1).applyMatrix3(E),m.set(v.x,v.y)}const g=O(E),G=M.subPaths;for(let m=0,x=G.length;m<x;m++){const j=G[m].curves;for(let _=0;_<j.length;_++){const k=j[_];k.isLineCurve?(h(k.v1),h(k.v2)):k.isCubicBezierCurve?(h(k.v0),h(k.v1),h(k.v2),h(k.v3)):k.isQuadraticBezierCurve?(h(k.v0),h(k.v1),h(k.v2)):k.isEllipseCurve&&(g&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),X.set(k.aX,k.aY),h(X),k.aX=X.x,k.aY=X.y,k.xRadius*=J(E),k.yRadius*=Q(E))}}}function O(M){return M.elements[1]!==0||M.elements[3]!==0}function J(M){const E=M.elements;return Math.sqrt(E[0]*E[0]+E[1]*E[1])}function Q(M){const E=M.elements;return Math.sqrt(E[3]*E[3]+E[4]*E[4])}const S=[],z={},U=[],q=new Pe,ne=new Pe,re=new Pe,pe=new Pe,X=new Z,v=new ae,ce=new Pe,ie=new DOMParser().parseFromString(e,"image/svg+xml");return t(ie.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:S,xml:ie.documentElement}}static createShapes(e){const t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},s={loc:t.ORIGIN,t:0};function o(I,F,R,T){const b=I.x,H=F.x,P=R.x,O=T.x,J=I.y,Q=F.y,S=R.y,z=T.y,U=(O-P)*(J-S)-(z-S)*(b-P),q=(H-b)*(J-S)-(Q-J)*(b-P),ne=(z-S)*(H-b)-(O-P)*(Q-J),re=U/ne,pe=q/ne;if(ne===0&&U!==0||re<=0||re>=1||pe<0||pe>1)return null;if(U===0&&ne===0){for(let X=0;X<2;X++)if(r(X===0?R:T,I,F),s.loc==t.ORIGIN){const v=X===0?R:T;return{x:v.x,y:v.y,t:s.t}}else if(s.loc==t.BETWEEN){const v=+(b+s.t*(H-b)).toPrecision(10),ce=+(J+s.t*(Q-J)).toPrecision(10);return{x:v,y:ce,t:s.t}}return null}else{for(let ce=0;ce<2;ce++)if(r(ce===0?R:T,I,F),s.loc==t.ORIGIN){const ie=ce===0?R:T;return{x:ie.x,y:ie.y,t:s.t}}const X=+(b+re*(H-b)).toPrecision(10),v=+(J+re*(Q-J)).toPrecision(10);return{x:X,y:v,t:re}}}function r(I,F,R){const T=R.x-F.x,b=R.y-F.y,H=I.x-F.x,P=I.y-F.y,O=T*P-H*b;if(I.x===F.x&&I.y===F.y){s.loc=t.ORIGIN,s.t=0;return}if(I.x===R.x&&I.y===R.y){s.loc=t.DESTINATION,s.t=1;return}if(O<-Number.EPSILON){s.loc=t.LEFT;return}if(O>Number.EPSILON){s.loc=t.RIGHT;return}if(T*H<0||b*P<0){s.loc=t.BEHIND;return}if(Math.sqrt(T*T+b*b)<Math.sqrt(H*H+P*P)){s.loc=t.BEYOND;return}let J;T!==0?J=H/T:J=P/b,s.loc=t.BETWEEN,s.t=J}function i(I,F){const R=[],T=[];for(let b=1;b<I.length;b++){const H=I[b-1],P=I[b];for(let O=1;O<F.length;O++){const J=F[O-1],Q=F[O],S=o(H,P,J,Q);S!==null&&R.find(z=>z.t<=S.t+Number.EPSILON&&z.t>=S.t-Number.EPSILON)===void 0&&(R.push(S),T.push(new Z(S.x,S.y)))}}return T}function a(I,F,R){const T=new Z;F.getCenter(T);const b=[];return R.forEach(H=>{H.boundingBox.containsPoint(T)&&i(I,H.points).forEach(O=>{b.push({identifier:H.identifier,isCW:H.isCW,point:O})})}),b.sort((H,P)=>H.point.x-P.point.x),b}function l(I,F,R,T,b){(b==null||b==="")&&(b="nonzero");const H=new Z;I.boundingBox.getCenter(H);const P=[new Z(R,H.y),new Z(T,H.y)],O=a(P,I.boundingBox,F);O.sort((q,ne)=>q.point.x-ne.point.x);const J=[],Q=[];O.forEach(q=>{q.identifier===I.identifier?J.push(q):Q.push(q)});const S=J[0].point.x,z=[];let U=0;for(;U<Q.length&&Q[U].point.x<S;)z.length>0&&z[z.length-1]===Q[U].identifier?z.pop():z.push(Q[U].identifier),U++;if(z.push(I.identifier),b==="evenodd"){const q=z.length%2===0,ne=z[z.length-2];return{identifier:I.identifier,isHole:q,for:ne}}else if(b==="nonzero"){let q=!0,ne=null,re=null;for(let pe=0;pe<z.length;pe++){const X=z[pe];q?(re=F[X].isCW,q=!1,ne=X):re!==F[X].isCW&&(re=F[X].isCW,q=!0)}return{identifier:I.identifier,isHole:q,for:ne}}else console.warn('fill-rule: "'+b+'" is currently not implemented.')}let u=0,c=999999999,A=-999999999,B=e.subPaths.map(I=>{const F=I.getPoints();let R=-999999999,T=999999999,b=-999999999,H=999999999;for(let P=0;P<F.length;P++){const O=F[P];O.y>R&&(R=O.y),O.y<T&&(T=O.y),O.x>b&&(b=O.x),O.x<H&&(H=O.x)}return A<=b&&(A=b+1),c>=H&&(c=H-1),{curves:I.curves,points:F,isCW:Vn.isClockWise(F),identifier:u++,boundingBox:new Wn(new Z(H,T),new Z(b,R))}});B=B.filter(I=>I.points.length>1);const y=B.map(I=>l(I,B,c,A,e.userData.style.fillRule)),D=[];return B.forEach(I=>{if(!y[I.identifier].isHole){const R=new Zn;R.curves=I.curves,y.filter(b=>b.isHole&&b.for===I.identifier).forEach(b=>{const H=B[b.identifier],P=new Bt;P.curves=H.curves,R.holes.push(P)}),D.push(R)}}),D}static getStrokeStyle(e,n,t,s,o){return e=e!==void 0?e:1,n=n!==void 0?n:"#000",t=t!==void 0?t:"miter",s=s!==void 0?s:"butt",o=o!==void 0?o:4,{strokeColor:n,strokeWidth:e,strokeLineJoin:t,strokeLineCap:s,strokeMiterLimit:o}}static pointsToStroke(e,n,t,s){const o=[],r=[],i=[];if(Bn.pointsToStrokeWithBuffers(e,n,t,s,o,r,i)===0)return null;const a=new we;return a.setAttribute("position",new De(o,3)),a.setAttribute("normal",new De(r,3)),a.setAttribute("uv",new De(i,2)),a}static pointsToStrokeWithBuffers(e,n,t,s,o,r,i,a){const l=new Z,u=new Z,c=new Z,A=new Z,B=new Z,y=new Z,D=new Z,I=new Z,F=new Z,R=new Z,T=new Z,b=new Z,H=new Z,P=new Z,O=new Z,J=new Z,Q=new Z;t=t!==void 0?t:12,s=s!==void 0?s:.001,a=a!==void 0?a:0,e=se(e);const S=e.length;if(S<2)return 0;const z=e[0].equals(e[S-1]);let U,q=e[0],ne;const re=n.strokeWidth/2,pe=1/(S-1);let X=0,v,ce,ie,ye,M=!1,E=0,h=a*3,g=a*2;G(e[0],e[1],l).multiplyScalar(re),I.copy(e[0]).sub(l),F.copy(e[0]).add(l),R.copy(I),T.copy(F);for(let w=1;w<S;w++){U=e[w],w===S-1?z?ne=e[1]:ne=void 0:ne=e[w+1];const N=l;if(G(q,U,N),c.copy(N).multiplyScalar(re),b.copy(U).sub(c),H.copy(U).add(c),v=X+pe,ce=!1,ne!==void 0){G(U,ne,u),c.copy(u).multiplyScalar(re),P.copy(U).sub(c),O.copy(U).add(c),ie=!0,c.subVectors(ne,q),N.dot(c)<0&&(ie=!1),w===1&&(M=ie),c.subVectors(ne,U),c.normalize();const d=Math.abs(N.dot(c));if(d!==0){const f=re/d;c.multiplyScalar(-f),A.subVectors(U,q),B.copy(A).setLength(f).add(c),J.copy(B).negate();const K=B.length(),ee=A.length();A.divideScalar(ee),y.subVectors(ne,U);const ue=y.length();switch(y.divideScalar(ue),A.dot(J)<ee&&y.dot(J)<ue&&(ce=!0),Q.copy(B).add(U),J.add(U),ye=!1,ce?ie?(O.copy(J),H.copy(J)):(P.copy(J),b.copy(J)):W(),n.strokeLineJoin){case"bevel":j(ie,ce,v);break;case"round":_(ie,ce),ie?x(U,b,P,v,0):x(U,O,H,v,1);break;case"miter":case"miter-clip":default:const he=re*n.strokeMiterLimit/K;if(he<1)if(n.strokeLineJoin!=="miter-clip"){j(ie,ce,v);break}else _(ie,ce),ie?(y.subVectors(Q,b).multiplyScalar(he).add(b),D.subVectors(Q,P).multiplyScalar(he).add(P),m(b,v,0),m(y,v,0),m(U,v,.5),m(U,v,.5),m(y,v,0),m(D,v,0),m(U,v,.5),m(D,v,0),m(P,v,0)):(y.subVectors(Q,H).multiplyScalar(he).add(H),D.subVectors(Q,O).multiplyScalar(he).add(O),m(H,v,1),m(y,v,1),m(U,v,.5),m(U,v,.5),m(y,v,1),m(D,v,1),m(U,v,.5),m(D,v,1),m(O,v,1));else ce?(ie?(m(F,X,1),m(I,X,0),m(Q,v,0),m(F,X,1),m(Q,v,0),m(J,v,1)):(m(F,X,1),m(I,X,0),m(Q,v,1),m(I,X,0),m(J,v,0),m(Q,v,1)),ie?P.copy(Q):O.copy(Q)):ie?(m(b,v,0),m(Q,v,0),m(U,v,.5),m(U,v,.5),m(Q,v,0),m(P,v,0)):(m(H,v,1),m(Q,v,1),m(U,v,.5),m(U,v,.5),m(Q,v,1),m(O,v,1)),ye=!0;break}}else W()}else W();!z&&w===S-1&&k(e[0],R,T,ie,!0,X),X=v,q=U,I.copy(P),F.copy(O)}if(!z)k(U,b,H,ie,!1,v);else if(ce&&o){let w=Q,N=J;M!==ie&&(w=J,N=Q),ie?(ye||M)&&(N.toArray(o,0*3),N.toArray(o,3*3),ye&&w.toArray(o,1*3)):(ye||!M)&&(N.toArray(o,1*3),N.toArray(o,3*3),ye&&w.toArray(o,0*3))}return E;function G(w,N,d){return d.subVectors(N,w),d.set(-d.y,d.x).normalize()}function m(w,N,d){o&&(o[h]=w.x,o[h+1]=w.y,o[h+2]=0,r&&(r[h]=0,r[h+1]=0,r[h+2]=1),h+=3,i&&(i[g]=N,i[g+1]=d,g+=2)),E+=3}function x(w,N,d,f,K){l.copy(N).sub(w).normalize(),u.copy(d).sub(w).normalize();let ee=Math.PI;const ue=l.dot(u);Math.abs(ue)<1&&(ee=Math.abs(Math.acos(ue))),ee/=t,c.copy(N);for(let he=0,de=t-1;he<de;he++)A.copy(c).rotateAround(w,ee),m(c,f,K),m(A,f,K),m(w,f,.5),c.copy(A);m(A,f,K),m(d,f,K),m(w,f,.5)}function W(){m(F,X,1),m(I,X,0),m(b,v,0),m(F,X,1),m(b,v,1),m(H,v,0)}function j(w,N,d){N?w?(m(F,X,1),m(I,X,0),m(b,v,0),m(F,X,1),m(b,v,0),m(J,v,1),m(b,d,0),m(P,d,0),m(J,d,.5)):(m(F,X,1),m(I,X,0),m(H,v,1),m(I,X,0),m(J,v,0),m(H,v,1),m(H,d,1),m(O,d,0),m(J,d,.5)):w?(m(b,d,0),m(P,d,0),m(U,d,.5)):(m(H,d,1),m(O,d,0),m(U,d,.5))}function _(w,N){N&&(w?(m(F,X,1),m(I,X,0),m(b,v,0),m(F,X,1),m(b,v,0),m(J,v,1),m(b,X,0),m(U,v,.5),m(J,v,1),m(U,v,.5),m(P,X,0),m(J,v,1)):(m(F,X,1),m(I,X,0),m(H,v,1),m(I,X,0),m(J,v,0),m(H,v,1),m(H,X,1),m(J,v,0),m(U,v,.5),m(U,v,.5),m(J,v,0),m(O,X,1)))}function k(w,N,d,f,K,ee){switch(n.strokeLineCap){case"round":K?x(w,d,N,ee,.5):x(w,N,d,ee,.5);break;case"square":if(K)l.subVectors(N,w),u.set(l.y,-l.x),c.addVectors(l,u).add(w),A.subVectors(u,l).add(w),f?(c.toArray(o,1*3),A.toArray(o,0*3),A.toArray(o,3*3)):(c.toArray(o,1*3),c.toArray(o,3*3),A.toArray(o,0*3));else{l.subVectors(d,w),u.set(l.y,-l.x),c.addVectors(l,u).add(w),A.subVectors(u,l).add(w);const ue=o.length;f?(c.toArray(o,ue-1*3),A.toArray(o,ue-2*3),A.toArray(o,ue-4*3)):(c.toArray(o,ue-2*3),A.toArray(o,ue-1*3),A.toArray(o,ue-4*3))}break}}function se(w){let N=!1;for(let f=1,K=w.length-1;f<K;f++)if(w[f].distanceTo(w[f+1])<s){N=!0;break}if(!N)return w;const d=[];d.push(w[0]);for(let f=1,K=w.length-1;f<K;f++)w[f].distanceTo(w[f+1])>=s&&d.push(w[f]);return d.push(w[w.length-1]),d}}}const Et=new WeakMap;class ao extends lt{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,t,s){const o=new je(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,r=>{const i={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(r,i).then(n).catch(s)},t,s)}decodeDracoFile(e,n,t,s){const o={attributeIDs:t||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!t};this.decodeGeometry(e,o).then(n)}decodeGeometry(e,n){for(const a in n.attributeTypes){const l=n.attributeTypes[a];l.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[a]=l.name)}const t=JSON.stringify(n);if(Et.has(e)){const a=Et.get(e);if(a.key===t)return a.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const o=this.workerNextTaskID++,r=e.byteLength,i=this._getWorker(o,r).then(a=>(s=a,new Promise((l,u)=>{s._callbacks[o]={resolve:l,reject:u},s.postMessage({type:"decode",id:o,taskConfig:n,buffer:e},[e])}))).then(a=>this._createGeometry(a.geometry));return i.catch(()=>!0).then(()=>{s&&o&&this._releaseTask(s,o)}),Et.set(e,{key:t,promise:i}),i}_createGeometry(e){const n=new we;e.index&&n.setIndex(new Ze(e.index.array,1));for(let t=0;t<e.attributes.length;t++){const s=e.attributes[t],o=s.name,r=s.array,i=s.itemSize;n.setAttribute(o,new Ze(r,i))}return n}_loadLibrary(e,n){const t=new je(this.manager);return t.setPath(this.decoderPath),t.setResponseType(n),t.setWithCredentials(this.withCredentials),new Promise((s,o)=>{t.load(e,s,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(t=>{const s=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const o=qs.toString(),r=["/* draco decoder */",s,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(o){const r=o.data;switch(r.type){case"decode":s._callbacks[r.id].resolve(r);break;case"error":s._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,o){return s._taskLoad>o._taskLoad?-1:1});const t=this.workerPool[this.workerPool.length-1];return t._taskCosts[e]=n,t._taskLoad+=n,t})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function qs(){let p,e;onmessage=function(r){const i=r.data;switch(i.type){case"init":p=i.decoderConfig,e=new Promise(function(u){p.onModuleLoaded=function(c){u({draco:c})},DracoDecoderModule(p)});break;case"decode":const a=i.buffer,l=i.taskConfig;e.then(u=>{const c=u.draco,A=new c.Decoder,B=new c.DecoderBuffer;B.Init(new Int8Array(a),a.byteLength);try{const y=n(c,A,B,l),D=y.attributes.map(I=>I.array.buffer);y.index&&D.push(y.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:y},D)}catch(y){console.error(y),self.postMessage({type:"error",id:i.id,error:y.message})}finally{c.destroy(B),c.destroy(A)}});break}};function n(r,i,a,l){const u=l.attributeIDs,c=l.attributeTypes;let A,B;const y=i.GetEncodedGeometryType(a);if(y===r.TRIANGULAR_MESH)A=new r.Mesh,B=i.DecodeBufferToMesh(a,A);else if(y===r.POINT_CLOUD)A=new r.PointCloud,B=i.DecodeBufferToPointCloud(a,A);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!B.ok()||A.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+B.error_msg());const D={index:null,attributes:[]};for(const I in u){const F=self[c[I]];let R,T;if(l.useUniqueIDs)T=u[I],R=i.GetAttributeByUniqueId(A,T);else{if(T=i.GetAttributeId(A,r[u[I]]),T===-1)continue;R=i.GetAttribute(A,T)}D.attributes.push(s(r,i,A,I,F,R))}return y===r.TRIANGULAR_MESH&&(D.index=t(r,i,A)),r.destroy(A),D}function t(r,i,a){const u=a.num_faces()*3,c=u*4,A=r._malloc(c);i.GetTrianglesUInt32Array(a,c,A);const B=new Uint32Array(r.HEAPF32.buffer,A,u).slice();return r._free(A),{array:B,itemSize:1}}function s(r,i,a,l,u,c){const A=c.num_components(),y=a.num_points()*A,D=y*u.BYTES_PER_ELEMENT,I=o(r,u),F=r._malloc(D);i.GetAttributeDataArrayForAllPoints(a,c,I,D,F);const R=new u(r.HEAPF32.buffer,F,y).slice();return r._free(F),{name:l,array:R,itemSize:A}}function o(r,i){switch(i){case Float32Array:return r.DT_FLOAT32;case Int8Array:return r.DT_INT8;case Int16Array:return r.DT_INT16;case Int32Array:return r.DT_INT32;case Uint8Array:return r.DT_UINT8;case Uint16Array:return r.DT_UINT16;case Uint32Array:return r.DT_UINT32}}}let at;const co=()=>{if(at)return at;const p="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",e="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",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=p;WebAssembly.validate(n)&&(s=e);let o;const r=WebAssembly.instantiate(i(s),{}).then(c=>{o=c.instance,o.exports.__wasm_call_ctors()});function i(c){const A=new Uint8Array(c.length);for(let y=0;y<c.length;++y){const D=c.charCodeAt(y);A[y]=D>96?D-71:D>64?D-65:D>47?D+4:D>46?63:62}let B=0;for(let y=0;y<c.length;++y)A[B++]=A[y]<60?t[A[y]]:(A[y]-60)*64+A[++y];return A.buffer.slice(0,B)}function a(c,A,B,y,D,I){const F=o.exports.sbrk,R=B+3&-4,T=F(R*y),b=F(D.length),H=new Uint8Array(o.exports.memory.buffer);H.set(D,b);const P=c(T,B,y,b,D.length);if(P===0&&I&&I(T,R,y),A.set(H.subarray(T,T+B*y)),F(T-F(0)),P!==0)throw new Error(`Malformed buffer data: ${P}`)}const l={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return at={ready:r,supported:!0,decodeVertexBuffer(c,A,B,y,D){a(o.exports.meshopt_decodeVertexBuffer,c,A,B,y,o.exports[l[D]])},decodeIndexBuffer(c,A,B,y){a(o.exports.meshopt_decodeIndexBuffer,c,A,B,y)},decodeIndexSequence(c,A,B,y){a(o.exports.meshopt_decodeIndexSequence,c,A,B,y)},decodeGltfBuffer(c,A,B,y,D,I){a(o.exports[u[D]],c,A,B,y,o.exports[l[I]])}},at};export{ao as D,io as F,so as G,oo as H,co as M,no as O,Bn as S,ro as V};
//# sourceMappingURL=vendor-three-stdlib.js.map
